function autollamadoCP() {
    $(".ErrorCP").css("display", "none");
    $(".overlay_loading").css("display", "block");
    var a = $("#codigo_postal_cita").val();
    5 == a.length || 4 == a.length
        ? $.ajax({
              type: "POST",
              url: configCovid.urlCovid + "ValidarCP?CP=" + a,
              async: !1,
              data: { CP: a },
              dataType: "json",
              success: function (a) {
                  $(".overlay_loading").css("display", "block"),
                      1 == a[0].valido &&
                        $(".ContNoColonia").slideUp("slow"),
                        ObtenerColonias($('.MunicipioPaciente').val()),
                      0 == a[0].valido &&
                          ($(".overlay_loading").css("display", "none"),
                          $(".ErrorCP").css("display", "block").slideDown().text("Ingresa el Código Postal más cercano a tu colonia."),
                          $(".ErrorCP").css("display", "block").slideUp(),
                          $("#colonia_cita option").remove(),
                          $("#colonia_cita").append("<option value='-1'>Seleccione una colonia</option>"),
                          $(".ContNoColonia").slideDown("slow"),
                          validarCamposVacionForm1());
              },
              error: function (a, e, o) {
                  $(".overlay_loading").css("display", "none"),
                      $(".ErrorCP").css("display", "block").slideDown().text("El Código Postal no es válido. Favor de verificarlo."),
                      $("#colonia_cita option").remove(),
                      $("#colonia_cita").append("<option value='-1'>Seleccione una colonia</option>"),
                      $(".ContNoColonia").slideDown("slow"),
                      validarCamposVacionForm1();
              },
          })
        : ($("#colonia_cita option").remove(),
          $("#colonia_cita").append("<option value='-1'>Seleccione una colonia</option>"),
          $(".overlay_loading").css("display", "none"),
          $(".ErrorCP").css("display", "block").slideDown().text("Favor de ingresar correctamente el Código Postal.")),
          $(".ContNoColonia").slideDown("slow"),
          validarCamposVacionForm1();;
}
function validarCamposVacionForm1() {
    
    validarDatosFaltantesForm1();

    var a = $("#clinica_cita").val(),
        e = $("#fecha_cita").val(),
        o = $("#hora_cita").val();
    if (a <= 0)
        return (
            $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"),
            $("#tel_confirmar, #form1 .cajas-texto .tel, #form1 .cajas-texto .correo, .nombre_paciente_cita, .apellidop_paciente_cita, .apellidom_paciente_cita, .fechanac_paciente_cita").attr("disabled", "disabled"),
            !1
        );
    if ("" == e)
        return (
            $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"),
            $("#tel_confirmar, #form1 .cajas-texto .tel, #form1 .cajas-texto .correo, .nombre_paciente_cita, .apellidop_paciente_cita, .apellidom_paciente_cita, .fechanac_paciente_cita").attr("disabled", "disabled"),
            !1
        );
    if ("" == o || o <= 0)
        return (
            $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"),
            $("#tel_confirmar, #form1 .cajas-texto .tel, #form1 .cajas-texto .correo, .nombre_paciente_cita, .apellidop_paciente_cita, .apellidom_paciente_cita, .fechanac_paciente_cita").attr("disabled", "disabled"),
            !1
        );
    if (
        ($("#tel_confirmar, #form1 .cajas-texto .tel, #form1 .cajas-texto .correo, .nombre_paciente_cita, .apellidop_paciente_cita, .apellidom_paciente_cita, .fechanac_paciente_cita, .estado_civil_cita, .colonia_cita, .EstadoPaciente, .MunicipioPaciente").removeAttr("disabled"),
        "" == $(".nombre_paciente_cita").val())
    )
        return $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1;
    if ("" == $(".apellidop_paciente_cita").val()) return $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1;
    if ("" == $(".fechanac_paciente_cita").val()) return $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1;
    if (!verifyDate($(".fechanac_paciente_cita").val(), 1)) return $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1;
    if (!($("#form1 .fila .caja-radio input[name='genero']:checked").val() >= 1)) return $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1;
    if (clinicaConPaquete){
      if(incluyePaquete != 1){
        if( !$("#form1 #chkNoPaquete").is(':checked') ){
            $('#continuar_1').attr('disabled', true).css('background-color','#e5e5e5');
            return false;
        }
      }
    }
    
    
    var i = $("#form1 .cajas-texto .tel").val(),
        t = $("#tel_confirmar").val(),
        c = $("#colonia_cita").val(),
        n = $("#codigo_postal_cita").val(),
        ec = $("#estado_civil_cita").val();
    if (i.length > 1) {
      $('#tel').closest('.cajas-texto').find('.sd-info').html('Al registrar tu número de WhatsApp, tus resultados te estarán llegando de manera automática.');
      $('#tel').closest('.cajas-texto').find('.sd-info').show();
    } else {
      $('#tel').closest('.cajas-texto').find('.sd-info').hide();
    }
    if (i.length < 13) return $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1;
    if (t.length < 13) return $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1;
    if ("-1" == c || null == c) return $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1;
    if ("-1" == ec) return $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1;
    if ("" == n || n.length < 4 || n.length >= 6) return $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1;

    if ($("#calle_cita").val() == "") { return $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1; }
    if ($("#numero_casa_cita").val() == "") { return $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1; }

    var r = $("#form1 .cajas-texto .correo").val();
    if (/^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i.test(r));
    else if ("" != r) return $("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1;
    return $("#form1 #chkTerminosRegistro").is(":checked") && $("#form1 #chkTerminosRegistro2").is(":checked") && $("#form1 #chkTerminosRegistro4").is(":checked") && $("#form1 #chkPreparaciones").is(":checked")
        ? t.length > 0 && i.length > 0 && t != i
            ? ($("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1)
            : ($("#continuar_1").attr("disabled", !1).css("background-color", "#0074d9"),
              $(".NombrePaciente").text($(".nombre_paciente_cita").val() + " " + $(".apellidop_paciente_cita").val() + " " + $(".apellidom_paciente_cita").val()),
              $(".FechaPaciente").text($(".fechanac_paciente_cita").val()),
              $(".CorreoPaciente").text(r),
              void $(".TelefonoPaciente").text(t))
        : ($("#continuar_1").attr("disabled", !0).css("background-color", "#e5e5e5"), !1);
}

function validarDatosFaltantesForm1(){
    var campos_faltantes = 0;
    if($("#form1 #chkTerminosRegistro").is(":checked") && $("#form1 #chkTerminosRegistro2").is(":checked") && $("#form1 #chkTerminosRegistro4").is(":checked") && $("#form1 #chkPreparaciones").is(":checked")){        
        
        if ($(".nombre_paciente_cita").val() == "") { $("#contenedor-error-nombre-form1").slideDown("slow"); $("#contenedor-error-apPaterno-form1").css("margin-left","0"); campos_faltantes++; } else{ $("#contenedor-error-nombre-form1").slideUp("slow", function(){$("#contenedor-error-apPaterno-form1").css("margin-left","50%");}); }
        if ($(".apellidop_paciente_cita").val() == "") { $("#contenedor-error-apPaterno-form1").slideDown("slow"); campos_faltantes++; } else{ $("#contenedor-error-apPaterno-form1").slideUp("slow"); }

        //if ($(".apellidom_paciente_cita").val() == "") { $("#contenedor-error-apMaterno-form1").slideDown("slow"); $("#contenedor-error-fechaNacimiento-form1").css("margin-left","0"); } else{ $("#contenedor-error-apMaterno-form1").slideUp("slow", function(){$("#contenedor-error-fechaNacimiento-form1").css("margin-left","50%");}); }
        if ($("#fechanac_paciente_cita").val() == "" || $("#fechanac_paciente_cita").val() == "dd/mm/aaaa") 
        { $("#contenedor-error-fechaNacimiento-form1").html("*Ingrese la fecha de nacimiento."), $("#contenedor-error-fechaNacimiento-form1").slideDown("slow"); campos_faltantes++; } 
        else{ $("#contenedor-error-fechaNacimiento-form1").slideUp("slow"); }

        if ($("#estado_civil_cita").val() == "-1") { $("#contenedor-error-estadoCivil-form1").slideDown("slow"); campos_faltantes++; } else{ $("#contenedor-error-estadoCivil-form1").slideUp("slow"); }
        if ($("#EstadoPaciente").val() == null) { $("#contenedor-error-estadoPaciente-form1").slideDown("slow"); campos_faltantes++; } else{ $("#contenedor-error-estadoPaciente-form1").slideUp("slow"); }
        if ($("#MunicipioPaciente").val() == null) { $("#contenedor-error-municipioPaciente-form1").slideDown("slow"); campos_faltantes++; } else{ $("#contenedor-error-municipioPaciente-form1").slideUp("slow"); }

        if ($("#codigo_postal_cita").val() == "") { $("#contenedor-error-cp-form1").slideDown("slow"); campos_faltantes++; } else{ $("#contenedor-error-cp-form1").slideUp("slow"); }
        if ($("#colonia_cita").val() == "-1") { $("#contenedor-error-colonia-form1").slideDown("slow"); campos_faltantes++; } else{ $("#contenedor-error-colonia-form1").slideUp("slow"); }

        if ($("#calle_cita").val() == "") { $("#contenedor-error-calle-form1").slideDown("slow"); $("#contenedor-error-numeroCasa-form1").css("margin-left","0"); campos_faltantes++; } else{ $("#contenedor-error-calle-form1").slideUp("slow", function(){$("#contenedor-error-numeroCasa-form1").css("margin-left","50%");}); }
        if ($("#numero_casa_cita").val() == "") { $("#contenedor-error-numeroCasa-form1").slideDown("slow"); campos_faltantes++; } else{ $("#contenedor-error-numeroCasa-form1").slideUp("slow"); }

        if($("#form1 .cajas-texto .tel").val().length<13) { $("#contenedor-error-telefono-form1").slideDown("slow"); campos_faltantes++; } else{ $("#contenedor-error-telefono-form1").slideUp("slow"); }

        if(campos_faltantes > 0) { $("#contenedor-error-campos-faltantes-form1").slideDown("slow"); }
        else{ $("#contenedor-error-campos-faltantes-form1").slideUp("slow"); }
    }
    else{
        if ($(".nombre_paciente_cita").val() != "") { $("#contenedor-error-nombre-form1").slideUp("slow"); } else { campos_faltantes++; }
        if ($(".apellidop_paciente_cita").val() != "") {  $("#contenedor-error-apPaterno-form1").slideUp("slow"); } else { campos_faltantes++; }
        //if ($(".apellidom_paciente_cita").val() != "") { $("#contenedor-error-apMaterno-form1").slideUp("slow"); }
        if ($("#fechanac_paciente_cita").val() != "" && $("#fechanac_paciente_cita").val() != "dd/mm/aaaa") { $("#contenedor-error-fechaNacimiento-form1").slideUp("slow"); } else { campos_faltantes++; }

        if ($("#estado_civil_cita").val() != "-1") { $("#contenedor-error-estadoCivil-form1").slideUp("slow"); } else { campos_faltantes++; }
        if ($("#EstadoPaciente").val() != null) { $("#contenedor-error-estadoPaciente-form1").slideUp("slow"); } else { campos_faltantes++; }
        if ($("#MunicipioPaciente").val() != null) { $("#contenedor-error-municipioPaciente-form1").slideUp("slow"); } else { campos_faltantes++; }

        if ($("#codigo_postal_cita").val() != "") { $("#contenedor-error-cp-form1").slideUp("slow"); } else { campos_faltantes++; }
        if ($("#colonia_cita").val() != "-1") { $("#contenedor-error-colonia-form1").slideUp("slow"); } else { campos_faltantes++; }

        if ($("#calle_cita").val() != "") { $("#contenedor-error-calle-form1").slideUp("slow"); } else { campos_faltantes++; }
        if ($("#numero_casa_cita").val() != "") { $("#contenedor-error-numeroCasa-form1").slideUp("slow"); } else { campos_faltantes++; }

        if($("#form1 .cajas-texto .tel").val().length>=13) { $("#contenedor-error-telefono-form1").slideUp("slow"); } else { campos_faltantes++; }
        if(campos_faltantes == 0) { $("#contenedor-error-campos-faltantes-form1").slideUp("slow"); }
    }
}

function validarCamposVacionForm2() {
    var a = 0;
    // "-1" != $(".Motivo_Prueba").val() && (a += 1),
        "-1" != $(".Seguridad_social").val() && (a += 1),
        "-1" != $(".Ocupacion").val() && (a += 1),
        $("#respesutaOpcional .caja-radios[data-question='SiNoOpcional'] .item").hasClass("active") && (a += 1),
        a >= 3 ? $("#continuar_2").attr("disabled", !1).css("background-color", "#0074d9") : $("#continuar_2").attr("disabled", !0).css("background-color", "#e5e5e5");
}
function validarCamposVacionForm3() {
    var a = 0;
    if (
        ($(".caja-radios[data-question='extranjero3'] .item").hasClass("active") &&
            ("no" == $(".caja-radios[data-question='extranjero3'] .item.active").attr("data-value")
                ? (a += 1)
                : $(".extranjero3Answ .caja-radio input[type='checkbox']").is(":checked") && verifyDateInput($(".FechaCuandoPreg4").val(), $(".FechaCuandoPreg4")) && (a += 1)),
        $("#form3 #respesuta5 .fila .caja-radio label input[type='checkbox']").is(":checked") &&
            ($(".OtroSintoma5").is(":checked")
                ? "" != $(".InputOtroSintoma5").val()
                    ? verifyDateInput($(".FechaSintomasContagio").val(), $(".FechaSintomasContagio")) && (a += 1)
                    : $(".InputOtroSintoma5").focus()
                : verifyDateInput($(".FechaSintomasContagio").val(), $(".FechaSintomasContagio")) && (a += 1)),
        $(".caja-radios[data-question='Pregunta6'] .item").hasClass("active") &&
            ("no" == $(".caja-radios[data-question='Pregunta6'] .item.active").attr("data-value")
                ? (a += 1)
                : $("#form3 .Preg6Answ .fila .caja-radio label input[type='checkbox']").is(":checked") && ($(".OtroSintoma6").is(":checked") ? ("" != $(".InputOtroSintoma6").val() ? (a += 1) : $(".InputOtroSintoma6").focus()) : (a += 1))),
        $(".caja-radios[data-question='Pregunta7'] .item").hasClass("active") &&
            ("no" == $(".caja-radios[data-question='Pregunta7'] .item.active").attr("data-value")
                ? (a += 1)
                : "si" == $(".caja-radios[data-question='Pregunta7'] .item.active").attr("data-value") && (a += Pregunta7Si()) ), //(a += 1)
        $(".caja-radios[data-question='Pregunta12'] .item").hasClass("active") ? a+=1 : a,
        $(".caja-radios[data-question='Pregunta8'] .item").hasClass("active") && ($(".caja-radios[data-question='Pregunta8'] .item.active").attr("data-value"), (a += 1)),
        $(".caja-radios[data-question='Pregunta9'] .item").hasClass("active") &&
            ("no" == $(".caja-radios[data-question='Pregunta9'] .item.active").attr("data-value") ? (a += 1) : $("#form3 .Preg9Answ .fila .caja-radio label input[type='checkbox']").is(":checked") && (a += 1)),
        $(".caja-radios[data-question='Pregunta11'] .item").hasClass("active") &&
            ("si" == $(".caja-radios[data-question='Pregunta11'] .item.active").attr("data-value")
                ? (a += 1)
                : $("#form3 .Preg11Answ .fila .caja-radio label input[type='checkbox']").is(":checked") && ("" != $(".DondeCuandoPrueba").val() ? verifyDateInput($(".FechaPrueba").val(), $(".FechaPrueba")) && (a += 1) : $(".DondeCuandoPrueba").focus())),
        a >= 8)
    ) {
        if($(".caja-radios[data-question='Pregunta6'] .item[data-value='no']").hasClass("active")){
            $(".OtroSintoma6").prop("checked", false);  
          }
        if ("" == $(".FechaSintomasContagio").val()) return $(".FechaSintomasContagio").focus(), !1;
        if ("no" == $(".caja-radios[data-question='Pregunta11'] .item.active").attr("data-value") && "" == $(".FechaPrueba").val()) return $(".FechaPrueba").focus(), !1;
        $("#continuar_3").attr("disabled", !1).css("background-color", "#0074d9");
    } else $("#continuar_3").attr("disabled", !0).css("background-color", "#e5e5e5");
}
function validarCamposVacionForm4() {
    //Validar metodo de pago
    if($("#form4 #metodo_pago .caja-radio input[name='pago']:checked").val() > 0 && $("#form4 #metodo_pago .caja-radio input[name='pago']:checked").val() != 3){
        $('#continuar_4').attr('disabled', false).css('background-color','#0074d9');
        return false;
    } else {
        $('#continuar_4').attr('disabled', true).css('background-color','#e5e5e5');
    }
}
//*****VALIDA EL FORMATO DE LA FECHA DE NACIMIENTO*****//
function verifyDate(datevalue, tipo) {
    var valido = false;

    if (datevalue != null || datevalue != '') {
        var tmp = datevalue.split('/');
        var day = tmp[0];
        var month = tmp[1];
        var year = tmp[2];
        var fromYear = 1900;
        var now = new Date();

        if (datevalue.trim() == '') {
            if (tipo == 2) {
                $('#fechanac_paciente_cita').val("");
            }

            $('#fechanac_paciente_cita').closest('.cajas-texto').find('.sd-info').html('Ingrese la fecha de nacimiento.');
            $('#fechanac_paciente_cita').closest('.cajas-texto').find('.sd-info').show();
            console.log('Ingrese la fecha de nacimiento.');
        } else {
            if (day >= 1 && day <= 31) {
                if (month >= 1 && month <= 12) {
                    if (year >= fromYear && year <= now.getFullYear()) {
                        var fecha1= new Date(year, parseInt(month) - 1, day);
                        var fecha2 = new Date();

                        if (fecha1 > fecha2) {
                            if (tipo == 2) {
                                $('#fechanac_paciente_cita').val("");
                            }

                            $('#fechanac_paciente_cita').closest('.cajas-texto').find('.sd-info').html('La fecha de nacimiento no puede ser mayor a la fecha actual.');
                            $('#fechanac_paciente_cita').closest('.cajas-texto').find('.sd-info').show();
                            console.log('La fecha de nacimiento no puede ser mayor a la fecha actual.')
                        } else {
                            $('#fechanac_paciente_cita').closest('.cajas-texto').find('.sd-info').hide();
                            valido = true;
                        }
                    } else {
                        if (tipo == 2) {
                            $('#fechanac_paciente_cita').val("");
                        }

                        $('#fechanac_paciente_cita').closest('.cajas-texto').find('.sd-info').html('¡Ojo! Tu año de nacimiento debe estar dentro de' + " " + fromYear + " - " + now.getFullYear());
                        $('#fechanac_paciente_cita').closest('.cajas-texto').find('.sd-info').show();
                        console.log('¡Ojo! Tu año de nacimiento debe estar dentro de' + " " + fromYear + " - " + now.getFullYear());
                    }
                } else {
                    if (tipo == 2) {
                        $('#fechanac_paciente_cita').val("");
                    }
                    
                    $('#fechanac_paciente_cita').closest('.cajas-texto').find('.sd-info').html('El mes que ingresas es inválido.');
                    $('#fechanac_paciente_cita').closest('.cajas-texto').find('.sd-info').show();
                    console.log('El mes que ingresas es inválido.');
                }
            } else {
                if (tipo == 2) {
                    $('#fechanac_paciente_cita').val("");
                }
                $('#fechanac_paciente_cita').closest('.cajas-texto').find('.sd-info').html('El día que ingresas es inválido.');
                $('#fechanac_paciente_cita').closest('.cajas-texto').find('.sd-info').show();
                console.log('El día que ingresas es inválido.');
            }
        }
    }

    return valido;
}
//*****VALIDA EL FORMATO DE FECHA*****//
function verifyDateInput(datevalue, input) {
    var valido = false;

    if (datevalue != null || datevalue != '') {
        var tmp = datevalue.split('/');
        var day = tmp[0];
        var month = tmp[1];
        var year = tmp[2];
        var fromYear = 1900;
        var now = new Date();

        if (datevalue.trim() == '') {

            input.closest('.cajas-texto').find('.sd-info').html('Ingrese una fecha en el formato correcto.');
            input.closest('.cajas-texto').find('.sd-info').show();
        } else {
            if (day >= 1 && day <= 31) {
                if (month >= 1 && month <= 12) {
                    if (year >= fromYear && year <= now.getFullYear()) {
                        var fecha1= new Date(year, parseInt(month) - 1, day);
                        var fecha2 = new Date();

                        if (fecha1 > fecha2) {
                            input.closest('.cajas-texto').find('.sd-info').html('La fecha no puede ser mayor a la fecha actual.');
                            input.closest('.cajas-texto').find('.sd-info').show();
                        } else {
                            input.closest('.cajas-texto').find('.sd-info').hide();
                            valido = true;
                        }
                    } else {
                        input.closest('.cajas-texto').find('.sd-info').html('El año que ingresas es inválido.');
                        input.closest('.cajas-texto').find('.sd-info').show();
                    }
                } else {
                    input.closest('.cajas-texto').find('.sd-info').html('El mes que ingresas es inválido.');
                    input.closest('.cajas-texto').find('.sd-info').show();
                    console.log('El mes que ingresas es inválido.');
                }
            } else {
                if (tipo == 2) {
                    $('#fechanac_paciente_cita').val("");
                }
                input.closest('.cajas-texto').find('.sd-info').html('El día que ingresas es inválido.');
                input.closest('.cajas-texto').find('.sd-info').show();
            }
        }
    }

    return valido;
}
function validarCamposVacionForm5() {
    $("#contenedor-error-pago").text("").hide();
    var a = 0;
    return (
        "" != $("#nombre-titular").val() && (a += 1),
        "" != $("#numero-tarjeta").val() && 16 == $("#numero-tarjeta").val().length && (a += 1),
        "" != $("#fecha-vencimiento-mes").val() && 2 == $("#fecha-vencimiento-mes").val().length && (a += 1),
        "" != $("#fecha-vencimiento-anio").val() && 2 == $("#fecha-vencimiento-anio").val().length && (a += 1),
        (("" != $("#numero-cvv").val() && 3 == $("#numero-cvv").val().length) || ("" != $("#numero-cvv").val() && 4 == $("#numero-cvv").val().length)) && (a += 1),
        void (a >= 5 ? $("#continuar_4").attr("disabled", !1).css("background-color", "#0074d9") : $("#continuar_4").attr("disabled", !0).css("background-color", "#e5e5e5"))
    );
}
function validarCamposVacionFormClinica5() {
    if (!$("#chkTerminosClinica").is(":checked")) return $("#continuar_6").attr("disabled", !0).css("background-color", "#e5e5e5"), !1;
    $("#continuar_6").attr("disabled", !1).css("background-color", "#0074d9");
}
function validarCamposVacionFormOxxoPay() {
    var a = 0;
    $("#chkTerminosPagoOxxo").is(":checked") && a++,
        $("#chkTerminosProtocoloOxxo").is(":checked") && a++,
        a >= 2 ? $("#continuar_8").attr("disabled", !1).css("background-color", "#0074d9") : $("#continuar_8").attr("disabled", !0).css("background-color", "#e5e5e5");
}
function validarCamposVacionFormCPLPY5() {
    var a = 0;
    $("#chkTerminosPagoCPLPY").is(":checked") && a++,
        $("#chkTerminosProtocoloCPLPY").is(":checked") && a++,
        a >= 2 ? $("#continuar_7").attr("disabled", !1).css("background-color", "#0074d9") : $("#continuar_7").attr("disabled", !0).css("background-color", "#e5e5e5");
}

var jsonPaqueteNuevo = [];

$(document).ready(function () {
    $(document).on("click", ".item-protocolo", function () {
        var a = $(this);
        $(a).find("i").toggleClass("icono-minus icono-mas-1"), $(a).next(".contenido-oculto").slideToggle();
    }),
        $("#tel, #tel_confirmar").mask("(000) 000-0000", { placeholder: "" }),
        $(".FechaVacunacionInfueza, #fechanac_paciente_cita, .FechaSintomasContagio, .FechaHospitalizado, .FechaPrueba, .FechaCuandoPreg4, .FechaDosis1, .FechaDosis2").mask("00/00/0000", { clearIfNotMatch: !0 }),
        $("#clinica_cita").change(function () {
          ocultarPaquete();
            //countDown(),
                $(".InformacionHorarios").slideDown("slow"),
                $(".overlay_loading").css("display", "flex"),
                $(".resumen_cita .detalle-estudio span:nth-child(3)").html("$0.00"),
                //$(".resumen_cita .detalle-paquete span:nth-child(3)").html("$0.00"),
                $(".resumen_cita .totales span:nth-child(2)").html("$0.00"),
                (configCovid.idSucursal = parseInt($(this).val())),
                setTimeout(function () {
                    SubEstudiosPorSucursal($("#clinica_cita").val());
                }, 1e3),
                validarCamposVacionForm1();
        }),
        $("#fecha_cita").attr("readonly", !0),
        $("#fecha_cita").datepicker({
            minDate: 0,
            maxDate: "15/11/2020",
            onSelect: function (a) {
                $("#fecha_cita").addClass("lleno"),
                    $(".resumen_cita .detalle-estudio span:nth-child(2)").html(a),
                    //$(".resumen_cita .detalle-paquete span:nth-child(2)").html(a),
                    $(".overlay_loading").css("display", "flex"),
                    setTimeout(function () {
                        horariosDisponibleEspecifico(2, $("#clinica_cita").val(), a, configCovid.jsonEstudio.Id) && getHorario(a), validarCamposVacionForm1();
                    }, 1e3);
            },
        }),
        $("#hora_cita").change(function () {
            /*mostrarPaquete();*/
            var a = $("#fecha_cita").val(),
                e = $("#hora_cita option:selected").html();
            $(".resumen_cita .detalle-estudio span:nth-child(2)").html(a + " " + e), buscarHorarioMKTenSis(configCovid.arrayHorariosSis, e.trim()), validarCamposVacionForm1();
            //$(".resumen_cita .detalle-paquete span:nth-child(2)").html(a + " " + e), buscarHorarioMKTenSis(configCovid.arrayHorariosSis, e.trim()), validarCamposVacionForm1();
        }),
        $("#form1 .cajas-texto .tel, #tel_confirmar").keydown(function (a) {
            a.shiftKey && a.preventDefault(),
                46 != a.keyCode && 8 != a.keyCode && 9 != a.keyCode && 37 != a.keyCode && 39 != a.keyCode && $(this).val().length >= 15 && a.preventDefault(),
                (a.keyCode < 48 || a.keyCode > 57) && (a.keyCode < 96 || a.keyCode > 105) && 46 != a.keyCode && 8 != a.keyCode && 9 != a.keyCode && 37 != a.keyCode && 39 != a.keyCode && a.preventDefault();
        }),
        $("#tel_confirmar").blur(function () {
            var a = $("#form1 .cajas-texto .tel").val(),
                e = $("#tel_confirmar").val();
            if (14 == a.length && 14 == e.length && a != e) return $("#form1 .cajas-texto .tel").focus(), $("#contenedor-error-form1").text("Los números de teléfono deben coincidir.").show(), !1;
        }),
        $("#codigo_postal_cita").blur(function () {
            if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) 
                || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))) { 
                if ($("#codigo_postal_cita").val().length <= 4) {
                    $("#colonia_cita option").remove();
                    $("#colonia_cita").append("<option value='-1'>Seleccione una colonia</option>");
                    $(".ContNoColonia").slideUp("slow");
                    $("#chkNoColonia").prop("checked", false);
                    $(".ContColonia").slideDown("slow");
                    validarCamposVacionForm1();
                }else{
                    if(!$(".ContNoColonia").is(":visible")) {
                        $(".ContNoColonia").slideUp("slow");
                        $("#chkNoColonia").prop("checked", false);
                        $(".ContColonia").slideDown("slow");
                        autollamadoCP();
                    }
                }
            }
        }),
        $("#codigo_postal_cita").keyup(function (a) {
            if ($("#codigo_postal_cita").val().length <= 4) {
              $("#colonia_cita option").remove();
              $("#colonia_cita").append("<option value='-1'>Seleccione una colonia</option>");
              $(".ContNoColonia").slideUp("slow");
              $("#chkNoColonia").prop("checked", false);
              $(".ContColonia").slideDown("slow");
              validarCamposVacionForm1();
            }else{
                if(!$(".ContNoColonia").is(":visible")) {
                    $(".ContNoColonia").slideUp("slow");
                    $("#chkNoColonia").prop("checked", false);
                    $(".ContColonia").slideDown("slow");
                    autollamadoCP();
                }
            }
        }),
        $('.EstadoPaciente').change(function () {
            if ($('.EstadoPaciente').val() != "-1") {
                var estado = $('.EstadoPaciente').val();
                $.ajax({
                    type: 'GET',
                    url: configHeader.apiBase + '/Municipios/Listado',
                    data: { IdEstado: estado },
                    dataType: 'json',
                    beforeSend: function () {
                        $('.MunicipioPaciente').attr('disabled', true);
                        $('.MunicipioPaciente').find('option').remove().end().append('<option value="">Cargando...</option>');
                        $(".codigo_postal_cita").val('');
                        $(".ContNoColonia").slideUp("slow");
                        $("#chkNoColonia").prop("checked", false);
                        $(".ContColonia").slideDown("slow");
                    },
                    success: function (response) {
                        $('.MunicipioPaciente option').remove();
                        $('.MunicipioPaciente').append($('<option selected disabled></option>').attr('value', '-1').text('Selecciona tu municipio'));
                        $("#colonia_cita option").remove();
                        $("#colonia_cita").append("<option value='-1'>Seleccione una colonia</option>");
                        $.each(response, function (i, item) {
                            var desc = item.Descripcion.toLowerCase();
                            var descripcionCapitalize = desc.charAt(0).toUpperCase() + desc.slice(1);
                            $('.MunicipioPaciente').append($('<option></option>').attr({ 'value': item.Id, 'data-lat': item.Lat, 'data-lng': item.Lng }).text(descripcionCapitalize));
                        });
                        $('.MunicipioPaciente').append($('<option></option>').attr('value', '0').text('No aparece mi municipio'));
                        $('.MunicipioPaciente').attr('disabled', false);
                        validarCamposVacionForm1();
                    }
                });
            } else {
                $('.MunicipioPaciente').empty();
                $('.MunicipioPaciente').append($('<option selected disabled></option>').attr('value', '-1').text('Selecciona tu municipio'));
                $("#colonia_cita option").remove();
                $("#colonia_cita").append("<option value='-1'>Seleccione una colonia</option>");
                validarCamposVacionForm1();
            }

            $("#ContadorCita2").slideDown("slow");
            $("#ContadorCita1").slideUp("slow");
            $("#ContadorCitaGeneral").slideUp("slow");
        }),
        $('.MunicipioPaciente').change(function () {
            if ($('.MunicipioPaciente').val() != "-1") {
                if ( $('.MunicipioPaciente').val() == "0") {
                    $(".NoMunicipio").slideUp("slow");
                    $(".codigo_postal_cita").val("00000");
                    $("#colonia_cita").append("<option selected value='0'>Colonia Por defecto</option>");
                    $(".ContNoColonia, .ErrorCP").slideUp("slow");
                    $("#chkNoColonia").prop("checked", false);
                }else{
                    $(".codigo_postal_cita").attr('disabled', false);
                    $(".codigo_postal_cita").val('');
                    $("#colonia_cita option").remove();
                    $("#colonia_cita").append("<option value='-1'>Seleccione una colonia</option>");
                    $(".NoMunicipio").slideDown("slow");
                    $(".ContNoColonia").slideUp("slow");
                    $("#chkNoColonia").prop("checked", false);
                    $(".ContColonia").slideDown("slow");
                }
            } else {
                $(".codigo_postal_cita").attr('disabled', true);
                $("#colonia_cita option").remove();
                $("#colonia_cita").append("<option value='-1'>Seleccione una colonia</option>");
                $(".NoMunicipio").slideDown("slow");
                $(".ContNoColonia").slideUp("slow");
                $("#chkNoColonia").prop("checked", false);
                $(".ContColonia").slideDown("slow");
            }
            validarCamposVacionForm1();
        }),
        $('.colonia_cita').change(function () {
            if ($('.colonia_cita').val() != "-1") {
                $(".ContNoColonia").slideUp("slow");
                $("#chkNoColonia").prop("checked", false);
            } else {
                $(".ContNoColonia").slideDown("slow");
            }
            validarCamposVacionForm1();
        }),
        $("#chkNoColonia").on("change", function () {
            if( $("#chkNoColonia").is(":checked") == true ){
                $("#colonia_cita option").remove();
                $("#codigo_postal_cita").parent().removeClass("izquierdo");
                $("#colonia_cita").append("<option selected value='0'>Colonia Por defecto</option>");
                $(".ContColonia, .ErrorCP").slideUp("slow");
            }else{
                $("#colonia_cita option").remove();
                $("#codigo_postal_cita").parent().addClass("izquierdo");
                $("#colonia_cita").append("<option value='-1'>Seleccione una colonia</option>");
                $(".ContColonia, .ErrorCP").slideDown("slow");
            }
            validarCamposVacionForm1();
        }),
        $("#form1 .cajas-texto .correo, #form1 .cajas-texto .tel, #tel_confirmar, #codigo_postal_cita").keyup(function (a) {
            $("#form1 .cajas-texto .correo").val($("#form1 .cajas-texto .correo").val().replace(/ /, ''));
            9 == a.keyCode ? validarCamposVacionForm1() : ($("#contenedor-error-form1").text("").hide(), validarCamposVacionForm1());
        }),
        $("#form1 #chkTerminosRegistro").on("change", function () {
            validarCamposVacionForm1();
        }),
        $("#form1 #chkTerminosRegistro2").on("change", function () {
            validarCamposVacionForm1();
        }),
        $("#form1 #chkNoPaquete").on("change", function () {
            validarCamposVacionForm1();
        }),
        $("#form1 #chkTerminosRegistro4").on("change", function () {
            validarCamposVacionForm1();
        }),
        $("#form1 #chkPreparaciones").on("change", function () {
            validarCamposVacionForm1();
        }),
        $("#colonia_cita, #estado_civil_cita").on("change", function () {
            validarCamposVacionForm1();
        }),
        $(".caja-radios[data-question='SiNoOpcional'] .item").click(function () {
            $(".caja-radios[data-question='SiNoOpcional'] .item").removeClass("active"),
                "si" == $(this).attr("data-value")
                    ? ($(this).addClass("active"), $(".SiNoOpcionalSi").slideDown("slow"), validarCamposVacionForm2())
                    : ($(this).addClass("active"), $(".SiNoOpcionalSi").slideUp("slow"), validarCamposVacionForm2());
        }),
        $(".caja-radios[data-question='extranjero'] .item").click(function () {
            $(".caja-radios[data-question='extranjero'] .item").removeClass("active"),
                "si" == $(this).attr("data-value") ? ($(this).addClass("active"), $(".DondeAnsw").slideDown("slow"), validarCamposVacionForm2()) : ($(this).addClass("active"), $(".DondeAnsw").slideUp("slow"), validarCamposVacionForm2());
        }),
        $(".caja-radios[data-question='viaje_republica'] .item").click(function () {
            $(".caja-radios[data-question='viaje_republica'] .item").removeClass("active"),
                "si" == $(this).attr("data-value") ? ($(this).addClass("active"), $(".RepuAnsw").slideDown("slow"), validarCamposVacionForm2()) : ($(this).addClass("active"), $(".RepuAnsw").slideUp("slow"), validarCamposVacionForm2());
        }),
        $(".caja-radios[data-question='extranjero2'] .item").click(function () {
            $(".caja-radios[data-question='extranjero2'] .item").removeClass("active"),
                "si" == $(this).attr("data-value")
                    ? ($(this).addClass("active"), $(".extranjero2Answ").slideDown("slow"), validarCamposVacionForm2())
                    : ($(this).addClass("active"), $(".extranjero2Answ").slideUp("slow"), validarCamposVacionForm2());
        }),
        $(".caja-radios[data-question='extranjero4'] .item").click(function () {
            $(".caja-radios[data-question='extranjero4'] .item").removeClass("active"), $(this).attr("data-value"), $(this).addClass("active"), validarCamposVacionForm2();
        }),
        $(".DondeAnsw .caja-radio input[type='checkbox'], .extranjero2Answ .caja-radio input[type='checkbox'], .RepuAnsw select, .FechaCuandoPreg4, .Ocupacion, .Seguridad_social, .Motivo_Prueba").on("change", function () {
            validarCamposVacionForm2();
        }),
        $(".FechaCuandoPreg4").keyup(function (a) {
            validarCamposVacionForm3();
        }),
        // Deshabilitar todos cuando selecciona no sintomas
        $(".NoSintomas").on("change", function () {
            if ($(this).is(":checked")){
                $(".ContOtroSintoma5").slideUp("slow");
                $(".ContFechaSintomas").slideUp("slow");
                $("#FechaSintomas").val("12/12/1999");
                $("#respesuta5 .caja-radio input[name='radio']").not(this).prop("disabled", true).prop("checked", false);
                $("#respesuta5 .caja-radio .sd-text").not(".NoSintomasP").css("color","#AFAFAF");
            } else {
                $("#respesuta5 .caja-radio input[name='radio']").not(this).prop("disabled", false);
                $("#respesuta5 .caja-radio .sd-text").not(".NoSintomasP").css("color","#616161");
                $(".ContFechaSintomas").slideDown("slow");
            }
        }),
        $(".OtroSintoma5").on("change", function () {
            if ($(".OtroSintoma5").is(":checked")) return $(".ContOtroSintoma5").slideDown("slow"), !1;
            $(".ContOtroSintoma5").slideUp("slow");
        }),
        $(".OtroSintoma6").on("change", function () {
            if ($(".OtroSintoma6").is(":checked")) return $(".ContOtroSintoma6").slideDown("slow"), !1;
            $(".ContOtroSintoma6").slideUp("slow");
        }),
        $(".InputOtroSintoma5, .InputOtroSintoma6, .EdadFumar, .Medicamento8Horas, .FechaSintomasContagio, .DondeCuandoHospitalizado, .FechaHospitalizado, .DondeCuandoPrueba, .FechaPrueba, .FechaDosis1, .FechaDosis2").keyup(function (a) {
            validarCamposVacionForm3();
        }),
        $(".Preg7Answ .fila .caja-radio label input[type='radio'], #form3 .fila .caja-radio label input[type='checkbox'], .FechaSintomasContagio, .cantidad_diaria, .FechaHospitalizado, .FechaPrueba, .extranjero3Answ .caja-radio input[type='checkbox'], .FechaDosis1, .FechaDosis2").on("change", function () {
            validarCamposVacionForm3();
        }),
        $(".Preg7Answ .fila .caja-radio label input[type='radio'][name='radio']").on("change", function () {
            if ( $(".Preg7Answ .fila .caja-radio label input[type='radio'][name='radio']:checked").attr('data-si') == 166 ) {
                //$(".FechaDosis1").val("");
                $('.ContFechaDosis2').css('display','none');
                $('.ContFechaDosis1').fadeIn('fast');
            }else{
                $(".FechaDosis2").val("");
                //$('.ContFechaDosis1').css('display','none');
                $('.ContFechaDosis1').fadeIn('fast');
                $('.ContFechaDosis2').fadeIn('fast');
            }
            validarCamposVacionForm3();
        }),
        $(".caja-radios[data-question='Preg2'] .item").click(function () {
            $(".caja-radios[data-question='Preg2'] .item").removeClass("active"),
                "si" == $(this).attr("data-value")
                    ? ($(this).addClass("active"), $(".Preg2Answ").slideDown("slow"),$ (".NoSintomas").prop("checked", false), NoTengoSintomas(), $(".medicamentosP").css("color", "#616161"),
                    $("#respesuta9").css("color", "#616161"), $("#respesuta9").css("pointer-events", "all"), $(".caja-radios[data-question='Pregunta9'] .item").removeClass("active"))
                    : ($(this).addClass("active"), $(".Preg2Answ").slideUp("slow"), $(".NoSintomas").prop("checked", true), NoTengoSintomas(), $(".medicamentosP").css("color", "#AFAFAF"), $("#respesuta9").css("color", "#AFAFAF"),
                    $(".caja-radios[data-question='Pregunta9'] .item").removeClass("active"), $(".caja-radios[data-question='Pregunta9'] .item:nth-child(2)").addClass("active"),$("#respesuta9").css("pointer-events", "none"), $(".Preg9Answ").slideUp("slow"));
                    // Si no tiene enfermedades deshabilitar pregunta de medicamentos
                "no" == $(this).attr("data-value")
                    ? ($(this).addClass("active"), $(".Preg2AnswNo").slideDown("slow"), $("#form3 .Preg2AnswNo .fila .caja-radio label input[type='checkbox']").attr('disabled',false), $("#respesuta5 .caja-radio .sd-text").not(".NoSintomasP").css("color","#616161"))
                    : ($(this).addClass("active"), $(".Preg2AnswNo").slideUp("slow"));
        }),
        $(".caja-radios[data-question='extranjero3'] .item").click(function () {
            $(".caja-radios[data-question='extranjero3'] .item").removeClass("active"),
                "si" == $(this).attr("data-value")
                    ? ($(this).addClass("active"), $(".extranjero3Answ").slideDown("slow"), validarCamposVacionForm3())
                    : ($(this).addClass("active"), $(".extranjero3Answ").slideUp("slow"), validarCamposVacionForm3());
        }),
        $(".caja-radios[data-question='Pregunta6'] .item").click(function () {
            $(".caja-radios[data-question='Pregunta6'] .item").removeClass("active"),
            "si" == $(this).attr("data-value")
            ? ($(this).addClass("active"), $(".Preg6Answ").slideDown("slow"), validarCamposVacionForm3()) 
            : ($(this).addClass("active"), $(".Preg6Answ").slideUp("slow"), validarCamposVacionForm3());

        }),
        $(".caja-radios[data-question='Pregunta7'] .item").click(function () {
            $(".caja-radios[data-question='Pregunta7'] .item").removeClass("active"), 
            "si" == $(this).attr("data-value")
                    ? ($(this).addClass("active"), $(".Preg7Answ").slideDown("slow"), validarCamposVacionForm3())
                    : ($(this).addClass("active"), $(".Preg7Answ").slideUp("slow"), validarCamposVacionForm3());
        }),
        $(".caja-radios[data-question='Pregunta8'] .item").click(function () {
            if( $("#form1 .fila .caja-radio input[name='genero']:checked").val() == 1){
                $(".caja-radios[data-question='Pregunta8'] .item").removeClass("active"), $(this).attr("data-value"), $(this).addClass("active"), validarCamposVacionForm3();
            }
        }),
        $(".caja-radios[data-question='Pregunta9'] .item").click(function () {
            $(".caja-radios[data-question='Pregunta9'] .item").removeClass("active"),
                "si" == $(this).attr("data-value") ? ($(this).addClass("active"), $(".Preg9Answ").slideDown("slow"), validarCamposVacionForm3()) : ($(this).addClass("active"), $(".Preg9Answ").slideUp("slow"), validarCamposVacionForm3());
        }),
        $(".caja-radios[data-question='Pregunta10'] .item").click(function () {
            $(".caja-radios[data-question='Pregunta10'] .item").removeClass("active"),
                "si" == $(this).attr("data-value") ? ($(this).addClass("active"), $(".Preg10Answ").slideDown("slow"), validarCamposVacionForm3()) : ($(this).addClass("active"), $(".Preg10Answ").slideUp("slow"), validarCamposVacionForm3());
        }),
        $(".caja-radios[data-question='Pregunta11'] .item").click(function () {
            $(".caja-radios[data-question='Pregunta11'] .item").removeClass("active"),
                "no" == $(this).attr("data-value") ? ($(this).addClass("active"), $(".Preg11Answ").slideDown("slow"), validarCamposVacionForm3()) : ($(this).addClass("active"), $(".Preg11Answ").slideUp("slow"), validarCamposVacionForm3());
        }),
        $(".caja-radios[data-question='Pregunta12'] .item").click(function () {
            $(".caja-radios[data-question='Pregunta12'] .item").removeClass("active"),
                "si" == $(this).attr("data-value")
                ? ($(this).addClass("active"), validarCamposVacionForm3()) 
                : (validarCamposVacionForm3());
                "no" == $(this).attr("data-value")
                ? ($(this).addClass("active"), validarCamposVacionForm3()) 
                : (validarCamposVacionForm3());
                "nopero" == $(this).attr("data-value")
                ? ($(this).addClass("active"), validarCamposVacionForm3()) 
                : (validarCamposVacionForm3());
        }),
        $("#form3 .Preg11Answ .fila .caja-radio label input[type='checkbox']").on("change", function () {
            $("#form3 .Preg11Answ .fila .caja-radio label input[type='checkbox']").prop("checked", !1), $(this).prop("checked", !0);
        }),
        $(".Preg6Answ select, .Preg7Answ select, #MesesLactancia").on("change", function () {
            validarCamposVacionForm3();
        }),
        $(".nombre_paciente_cita, .apellidom_paciente_cita, .apellidop_paciente_cita, .fechanac_paciente_cita, .calle_cita, .numero_casa_cita").keyup(function () {
            validarCamposVacionForm1();
        }),
        $("#form1 .fila .caja-radio input[name='genero']").on("change", function () {
            // Si es Hombre deshabilita pregunta de embarazo
            if($(this).val() == 2){
                $(".embarazoP").css("color", "#AFAFAF");
                $("#respesuta8").css("color", "#AFAFAF");
                $(".caja-radios[data-question='Pregunta8'] .item").removeClass("active");
                $(".caja-radios[data-question='Pregunta8'] .item:nth-child(3)").addClass("active");
            }else{
                $(".embarazoP").css("color", "#616161");
                $("#respesuta8").css("color", "#616161");
                $(".caja-radios[data-question='Pregunta8'] .item").removeClass("active");
            }
            validarCamposVacionForm1();
        }),
        $("#fechanac_paciente_cita").keyup(function () {
            verifyDate($(this).val(), 1);
        }),
        $("#fechanac_paciente_cita").change(function () {
            var a = $("#fechanac_paciente_cita").parsley();
            window.ParsleyUI.removeError(a, "myCustomError"), 10 == $(this).val().length && verifyDate($(this).val(), 2);
        }),
        $(".FechaCuandoPreg4").keyup(function () {
            verifyDateInput($(this).val(), $(this));
        }),
        $(".FechaCuandoPreg4").change(function () {
            var a = $(".FechaCuandoPreg4").parsley();
            window.ParsleyUI.removeError(a, "myCustomError"), 10 == $(this).val().length && verifyDateInput($(this).val(), $(this));
        }),
        $(".FechaSintomasContagio").keyup(function () {
            verifyDateInput($(this).val(), $(this));
        }),
        $(".FechaSintomasContagio").change(function () {
            var a = $(".FechaSintomasContagio").parsley();
            window.ParsleyUI.removeError(a, "myCustomError"), 10 == $(this).val().length && verifyDateInput($(this).val(), $(this));
        }),
        $(".FechaPrueba").keyup(function () {
            verifyDateInput($(this).val(), $(this));
        }),
        $(".FechaPrueba").change(function () {
            var a = $(".FechaSintomasContagio").parsley();
            window.ParsleyUI.removeError(a, "myCustomError"), 10 == $(this).val().length && verifyDateInput($(this).val(), $(this));
        }),
        $(".FechaDosis1, .FechaDosis2").keyup(function () {
            verifyDateInput($(this).val(), $(this));
        }),
        $(".FechaDosis1").change(function () {
            var a = $(".FechaDosis1").parsley();
            window.ParsleyUI.removeError(a, "myCustomError"), 10 == $(this).val().length && verifyDateInput($(this).val(), $(this));
        }),
        $(".FechaDosis2").change(function () {
            var a = $(".FechaDosis2").parsley();
            window.ParsleyUI.removeError(a, "myCustomError"), 10 == $(this).val().length && verifyDateInput($(this).val(), $(this));
        }),
        $("#numero-tarjeta, #fecha-vencimiento-mes, #fecha-vencimiento-anio, #numero-cvv ").keypress(function (a) {
            return (function (a) {
                var e = a.keyCode;
                if (8 == e || 9 == e || 13 == e) return !0;
                var o = String.fromCharCode(e);
                return /[0-9]/.test(o);
            })(a);
        }),
        $("#nombre-titular, #numero-tarjeta, #fecha-vencimiento-mes, #fecha-vencimiento-anio, #numero-cvv").keyup(function () {
            validarCamposVacionForm5();
        }),
        $("#chkTerminosPago, #chkTerminosProtocolo").on("change", function () {
            validarCamposVacionForm5();
        }),
        $("#btn_cambiar_metodo").click(function () {
            $("#form6").hide(), $("#form4").show();
        }),
        $("#chkTerminosPago, #chkTerminosClinica").on("change", function () {
            validarCamposVacionFormClinica5();
        }),
        $("#chkTerminosPagoOxxo, #chkTerminosProtocoloOxxo").on("change", function () {
            validarCamposVacionFormOxxoPay();
        }),
        $("#chkTerminosPagoCPLPY, #chkTerminosProtocoloCPLPY").on("change", function () {
            validarCamposVacionFormCPLPY5();
        }),
        $("#form4 .paginacion-form .opcion.regresar, .cambiar-clinica, .editar-datos").on("click", function () {
            $("#form4 #metodo_pago .pago_en_linea input[name='pago']").trigger("click");
        });
});

var incluyePaquete = 0;
/*
$(".btnAgregar").click(function(){
    if (incluyePaquete){
        incluyePaquete = 0;
        $(this).html("Agregar");    
        $("#chkNoPaquete").attr('disabled', false);
        $(".detalle-paquete").hide();
        $(".resumen_cita .totales span:nth-child(2)").html("$950.00");
        $(".banner-seguimiento").show();
    }else{
        incluyePaquete = 1;
        $(this).html("<i class='icono-ok'></i>Agregado");
        $("#chkNoPaquete").attr('disabled', true);
        $("#chkNoPaquete").prop('checked', false)
        $(".detalle-paquete").show();
        $(".resumen_cita .totales span:nth-child(2)").html("$1,440.00");
        $(".banner-seguimiento").hide();
    }
    validarCamposVacionForm1();

});
*/

var clinicaConPaquete = 0;

function mostrarPaquete() { //Agregar la linea donde está el llamado a esta funcion
    $.ajax({
        type: "GET",
        url: "https://api.emarketingsd.org/Citas/Citas2/PaquetesPorSucursal",
        //url: "http://localhost:4295/Citas2/PaquetesPorSucursal",
        data: { idEstudio: 2, IdSucursal: $(".clinica_cita").val() },
        dataType: "json",
        async: !1,
        success: function (a) {
            jsonPaqueteNuevo = [];
            clinicaConPaquete = 0;
            if(a.data.length != 0){
                for (var i = 0; i < a.data.length; i++) {
                    if (a.data[i].Paquete == 'SEGUIMIENTO INTEGRAL COVID-19') {
                        clinicaConPaquete = 1;
                        var replaced = a.data[i].JsonSubEstudio.replace(/<JSON>/g, ",");
                        var json = JSON.parse('[' + replaced + ']');
                        for (var j=0; j < json.length; j++){
                            json[j].Precio = a.data[i].PrecioPaquete;
                            jsonPaqueteNuevo.push(json[j]);
                        }
                        console.log(jsonPaqueteNuevo);
                        //console.log(configCovid.jsonEstudio);
                    }/*else {
                        clinicaConPaquete = 0;
                    } */
                }
                if(clinicaConPaquete){
                    $(".contenedorPaquete").show();
                }else{
                    $(".contenedorPaquete").hide();
                    $(".btnAgregar").html("Agregar");
                    incluyePaquete = 0
                }
            }
        },
        error: function (a, e, o) {},
    });
}

function ocultarPaquete() { //Agregar la linea donde está el llamado a esta funcion 
    $(".contenedorPaquete").hide();
    $(".btnAgregar").html("Agregar");
    incluyePaquete = 0
}
function NoTengoSintomas(){
    if ($(".NoSintomas").is(":checked")){
        $("#respesuta5 .caja-radio input[name='radio']").not($(".NoSintomas")).prop("disabled", true).prop("checked", false);
        $("#respesuta5 .caja-radio .sd-text").not(".NoSintomasP").css("color","#AFAFAF");
        $(".ContOtroSintoma5").slideUp("slow");
        $(".ContFechaSintomas").slideUp("slow", () => {
            $(".FechaSintomasContagio").val('12/12/1999');
        });
    } else {
        $("#respesuta5 .caja-radio input[name='radio']").not($(".NoSintomas")).prop("disabled", false);
        $("#respesuta5 .caja-radio .sd-text").not(".NoSintomasP").css("color","#616161");
        $(".FechaSintomasContagio").val('');
        $(".ContFechaSintomas").slideDown("slow");
    }

    setTimeout(function(){ 
        validarCamposVacionForm3();
    }, 1500);
}
function Pregunta7Si(){
    if ( $(".Preg7Answ .fila .caja-radio label input[type='radio'][name='radio']").is(":checked") ) {
        if ( $(".Preg7Answ .fila .caja-radio label input[type='radio'][name='radioMarca']").is(":checked") ) {
            if ( $(".Preg7Answ .fila .caja-radio label input[type='radio'][name='radio']:checked").attr('data-si') == 166 ) {
                if ( $('.FechaDosis1').val() != "" ) {
                    if ( verifyDateInput($('.FechaDosis1').val(), $('.FechaDosis1')) ) {
                        return 1;
                    }
                }
            }else{
                if ( $('.FechaDosis1').val() != "" && $('.FechaDosis2').val() != "" ) {
                    if ( verifyDateInput($('.FechaDosis1').val(), $('.FechaDosis1')) ) {
                        if ( verifyDateInput($('.FechaDosis2').val(), $('.FechaDosis2')) ) {
                            return 1;
                        }
                    }
                }
            }
        }
    }else{
        return 0
    }
}