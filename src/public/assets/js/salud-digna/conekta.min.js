"undefined"==typeof define&&!function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).bugsnag=a()}(function(){function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(){return P((Math.random()*Z<<0).toString(Y),X)}function d(){return W=Z>W?W:0,++W-1}function e(){return"c"+(new Date).getTime().toString(Y)+P(d().toString(Y),X)+V()+(c()+c())}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a){var b=[a.tagName];if(a.id&&b.push("#"+a.id),a.className&&a.className.length&&b.push("."+a.className.split(" ").join(".")),!document.querySelectorAll||!Array.prototype.indexOf)return b.join("");try{if(1===document.querySelectorAll(b.join("")).length)return b.join("")}catch(c){return b.join("")}if(a.parentNode.childNodes.length>1){var d=Array.prototype.indexOf.call(a.parentNode.childNodes,a)+1;b.push(":nth-child("+d+")")}return 1===document.querySelectorAll(b.join("")).length?b.join(""):a.parentNode?h(a.parentNode)+" > "+b.join(""):b.join("")}function i(a,b){return a&&a.length<=b?a:a.slice(0,b-"(...)".length)+"(...)"}function j(a){return l(a,"",[],null),JSON.stringify(a)}function k(a,b,c){this.val=a,this.k=b,this.parent=c,this.count=1}function l(a,b,c,d){if("object"==typeof a&&null!==a){if("function"==typeof a.toJSON){if(a instanceof k)return void a.count++;if(void 0===a.toJSON.forceDecirc)return}for(var e=0;e<c.length;e++)if(c[e]===a)return void(d[b]=new k(a,b,d));c.push(a);for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&l(a[f],f,c,a);c.pop()}}var m=function(a,b,c){for(var d=c,e=0,f=a.length;f>e;e++)d=b(d,a[e],e,a);return d},n=!{toString:null}.propertyIsEnumerable("toString"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(a){return 10>a?"0"+a:a},q={map:function(a,b){return m(a,function(a,c,d,e){return a.concat(b(c,d,e))},[])},reduce:m,filter:function(a,b){return m(a,function(a,c,d,e){return b(c,d,e)?a.concat(c):a},[])},includes:function(a,b){return m(a,function(a,c,d,e){return!0===a||c===b},!1)},keys:function(a){var b=[],c=void 0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);if(!n)return b;for(var d=0,e=o.length;e>d;d++)Object.prototype.hasOwnProperty.call(a,o[d])&&b.push(o[d]);return b},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isoDate:function(){var a=new Date;return a.getUTCFullYear()+"-"+p(a.getUTCMonth()+1)+"-"+p(a.getUTCDate())+"T"+p(a.getUTCHours())+":"+p(a.getUTCMinutes())+":"+p(a.getUTCSeconds())+"."+(a.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}},r=q.isoDate,s=function(){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[anonymous]",d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"manual",f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r();a(this,b),this.type=e,this.name=c,this.metaData=d,this.timestamp=f}return b.prototype.toJSON=function(){return{type:this.type,name:this.name,timestamp:this.timestamp,metaData:this.metaData}},b}();s.prototype.toJSON.forceDecirc=!0;var t=s,u=q.includes,v=function(a){return u(["undefined","number"],typeof a)&&parseInt(""+a,10)===a&&a>0},w={},x=q.filter,y=q.reduce,z=q.keys,A=q.isArray;w.schema={apiKey:{defaultValue:function(){return null},message:"(string) apiKey is required",validate:function(a){return"string"==typeof a&&a.length}},appVersion:{defaultValue:function(){return null},message:"(string) appVersion should have a value if supplied",validate:function(a){return null===a||"string"==typeof a&&a.length}},autoNotify:{defaultValue:function(){return!0},message:"(boolean) autoNotify should be true or false",validate:function(a){return!0===a||!1===a}},beforeSend:{defaultValue:function(){return[]},message:"(array[Function]) beforeSend should only contain functions",validate:function(a){return"function"==typeof a||A(a)&&x(a,function(a){return"function"==typeof a}).length===a.length}},endpoint:{defaultValue:function(){return"https://notify.bugsnag.com"},message:"(string) endpoint should be set",validate:function(){return!0}},sessionEndpoint:{defaultValue:function(){return"https://sessions.bugsnag.com"},message:"(string) sessionEndpoint should be set",validate:function(){return!0}},autoCaptureSessions:{defaultValue:function(){return!1},message:"(boolean) autoCaptureSessions should be true/false",validate:function(a){return!0===a||!1===a}},notifyReleaseStages:{defaultValue:function(){return null},message:"(array[string]) notifyReleaseStages should only contain strings",validate:function(a){return null===a||A(a)&&x(a,function(a){return"string"==typeof a}).length===a.length}},releaseStage:{defaultValue:function(){return"production"},message:"(string) releaseStage should be set",validate:function(a){return"string"==typeof a&&a.length}},maxBreadcrumbs:{defaultValue:function(){return 20},message:"(number) maxBreadcrumbs must be a number (≤40) if specified",validate:function(a){return 0===a||v(a)&&(void 0===a||40>=a)}},autoBreadcrumbs:{defaultValue:function(){return!0},message:"(boolean) autoBreadcrumbs should be true or false",validate:function(a){return"boolean"==typeof a}},user:{defaultValue:function(){return null},message:"(object) user should be an object",validate:function(a){return"object"==typeof a}},metaData:{defaultValue:function(){return null},message:"(object) metaData should be an object",validate:function(a){return"object"==typeof a}}},w.mergeDefaults=function(a,b){if(!a||!b)throw new Error("schema.mergeDefaults(opts, schema): opts and schema objects are required");return y(z(b),function(c,d){return c[d]=void 0!==a[d]?a[d]:b[d].defaultValue(),c},{})},w.validate=function(a,b){if(!a||!b)throw new Error("schema.mergeDefaults(opts, schema): opts and schema objects are required");var c=y(z(b),function(c,d){return b[d].validate(a[d])?c:c.concat({key:d,message:b[d].message,value:a[d]})},[]);return{valid:!c.length,errors:c}};var B=function(a){return a.app&&"string"==typeof a.app.releaseStage?a.app.releaseStage:a.config.releaseStage},C=function(a){return!(!a||!a.stack&&!a.stacktrace&&!a["opera#sourceloc"]||"string"!=typeof(a.stack||a.stacktrace||a["opera#sourceloc"]))},D={};!function(a,b){"use strict";"object"==typeof D?D=b():a.StackFrame=b()}(this,function(){"use strict";function a(a){return!isNaN(parseFloat(a))&&isFinite(a)}function b(a){return a.charAt(0).toUpperCase()+a.substring(1)}function c(a){return function(){return this[a]}}function d(a){if(a instanceof Object)for(var c=0;c<i.length;c++)a.hasOwnProperty(i[c])&&void 0!==a[i[c]]&&this["set"+b(i[c])](a[i[c]])}var e=["isConstructor","isEval","isNative","isToplevel"],f=["columnNumber","lineNumber"],g=["fileName","functionName","source"],h=["args"],i=e.concat(f,g,h);d.prototype={getArgs:function(){return this.args},setArgs:function(a){if("[object Array]"!==Object.prototype.toString.call(a))throw new TypeError("Args must be an Array");this.args=a},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(a){if(a instanceof d)this.evalOrigin=a;else{if(!(a instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new d(a)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(a(this.getLineNumber())?":"+this.getLineNumber():"")+(a(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var j=0;j<e.length;j++)d.prototype["get"+b(e[j])]=c(e[j]),d.prototype["set"+b(e[j])]=function(a){return function(b){this[a]=Boolean(b)}}(e[j]);for(var k=0;k<f.length;k++)d.prototype["get"+b(f[k])]=c(f[k]),d.prototype["set"+b(f[k])]=function(b){return function(c){if(!a(c))throw new TypeError(b+" must be a Number");this[b]=Number(c)}}(f[k]);for(var l=0;l<g.length;l++)d.prototype["get"+b(g[l])]=c(g[l]),d.prototype["set"+b(g[l])]=function(a){return function(b){this[a]=String(b)}}(g[l]);return d});var E={};!function(a,b){"use strict";"object"==typeof E?E=b(D):a.ErrorStackParser=b(a.StackFrame)}(this,function(a){"use strict";var b=/(^|@)\S+\:\d+/,c=/^\s*at .*(\S+\:\d+|\(native\))/m,d=/^(eval@)?(\[native code\])?$/;return{parse:function(a){if("undefined"!=typeof a.stacktrace||"undefined"!=typeof a["opera#sourceloc"])return this.parseOpera(a);if(a.stack&&a.stack.match(c))return this.parseV8OrIE(a);if(a.stack)return this.parseFFOrSafari(a);throw new Error("Cannot parse given Error object")},extractLocation:function(a){if(-1===a.indexOf(":"))return[a];var b=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(a.replace(/[\(\)]/g,""));return[b[1],b[2]||void 0,b[3]||void 0]},parseV8OrIE:function(b){return b.stack.split("\n").filter(function(a){return!!a.match(c)},this).map(function(b){b.indexOf("(eval ")>-1&&(b=b.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var c=b.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),d=this.extractLocation(c.pop()),e=c.join(" ")||void 0,f=["eval","<anonymous>"].indexOf(d[0])>-1?void 0:d[0];return new a({functionName:e,fileName:f,lineNumber:d[1],columnNumber:d[2],source:b})},this)},parseFFOrSafari:function(b){return b.stack.split("\n").filter(function(a){return!a.match(d)},this).map(function(b){if(b.indexOf(" > eval")>-1&&(b=b.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===b.indexOf("@")&&-1===b.indexOf(":"))return new a({functionName:b});var c=b.split("@"),d=this.extractLocation(c.pop()),e=c.join("@")||void 0;return new a({functionName:e,fileName:d[0],lineNumber:d[1],columnNumber:d[2],source:b})},this)},parseOpera:function(a){return!a.stacktrace||a.message.indexOf("\n")>-1&&a.message.split("\n").length>a.stacktrace.split("\n").length?this.parseOpera9(a):a.stack?this.parseOpera11(a):this.parseOpera10(a)},parseOpera9:function(b){for(var c=/Line (\d+).*script (?:in )?(\S+)/i,d=b.message.split("\n"),e=[],f=2,g=d.length;g>f;f+=2){var h=c.exec(d[f]);h&&e.push(new a({fileName:h[2],lineNumber:h[1],source:d[f]}))}return e},parseOpera10:function(b){for(var c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,d=b.stacktrace.split("\n"),e=[],f=0,g=d.length;g>f;f+=2){var h=c.exec(d[f]);h&&e.push(new a({functionName:h[3]||void 0,fileName:h[2],lineNumber:h[1],source:d[f]}))}return e},parseOpera11:function(c){return c.stack.split("\n").filter(function(a){return!!a.match(b)&&!a.match(/^Error created at/)},this).map(function(b){var c,d=b.split("@"),e=this.extractLocation(d.pop()),f=d.shift()||"",g=f.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;f.match(/\(([^\)]*)\)/)&&(c=f.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var h=void 0===c||"[arguments not available]"===c?void 0:c.split(",");return new a({functionName:g,args:h,fileName:e[0],lineNumber:e[1],columnNumber:e[2],source:b})},this)}}});var F={};!function(a,b){"use strict";"object"==typeof F?F=b(D):a.StackGenerator=b(a.StackFrame)}(this,function(a){return{backtrace:function(b){var c=[],d=10;"object"==typeof b&&"number"==typeof b.maxStackSize&&(d=b.maxStackSize);for(var e=arguments.callee;e&&c.length<d&&e.arguments;){for(var f=new Array(e.arguments.length),g=0;g<f.length;++g)f[g]=e.arguments[g];/function(?:\s+([\w$]+))+\s*\(/.test(e.toString())?c.push(new a({functionName:RegExp.$1||void 0,args:f})):c.push(new a({args:f}));try{e=e.caller}catch(h){break}}return c}}});var G=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},H=q.reduce,I=q.filter,J=function(){function a(c,d){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M();b(this,a),this.__isBugsnagReport=!0,this._ignored=!1,this._handledState=f,this.app=void 0,this.apiKey=void 0,this.breadcrumbs=[],this.context=void 0,this.device=void 0,this.errorClass=N(c,"[no error class]"),this.errorMessage=N(d,"[no error message]"),this.groupingHash=void 0,this.metaData={},this.request=void 0,this.severity=this._handledState.severity,this.stacktrace=H(e,function(a,b){var c=K(b);try{return"{}"===JSON.stringify(c)?a:a.concat(c)}catch(d){return a}},[]),this.user=void 0,this.session=void 0}return a.prototype.ignore=function(){this._ignored=!0},a.prototype.isIgnored=function(){return this._ignored},a.prototype.updateMetaData=function(a){var b;if(!a)return this;var c=void 0;return null===(arguments.length<=1?void 0:arguments[1])?this.removeMetaData(a):null===(arguments.length<=2?void 0:arguments[2])?this.removeMetaData(a,arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]):("object"==typeof(arguments.length<=1?void 0:arguments[1])&&(c=arguments.length<=1?void 0:arguments[1]),"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(b={},b[arguments.length<=1?void 0:arguments[1]]=arguments.length<=2?void 0:arguments[2],c=b),c?(this.metaData[a]||(this.metaData[a]={}),this.metaData[a]=G({},this.metaData[a],c),this):this)},a.prototype.removeMetaData=function(a,b){return"string"!=typeof a?this:b?this.metaData[a]?(delete this.metaData[a][b],this):this:(delete this.metaData[a],this)},a.prototype.toJSON=function(){return{payloadVersion:"4",exceptions:[{errorClass:this.errorClass,message:this.errorMessage,stacktrace:this.stacktrace,type:"browserjs"}],severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,breadcrumbs:this.breadcrumbs,context:this.context,user:this.user,metaData:this.metaData,groupingHash:this.groupingHash,request:this.request,session:this.session}},a}();J.prototype.toJSON.forceDecirc=!0;var K=function(a){var b={file:a.fileName,method:L(a.functionName),lineNumber:a.lineNumber,columnNumber:a.columnNumber,code:void 0,inProject:void 0};return b.lineNumber>-1&&!b.file&&!b.method&&(b.file="global code"),b},L=function(a){return/^global code$/i.test(a)?"global code":a},M=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},N=function(a,b){return"string"==typeof a&&a?a:b};J.getStacktrace=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return C(a)?E.parse(a).slice(b):I(F.backtrace(),function(a){return-1===(a.functionName||"").indexOf("StackGenerator$$")}).slice(1+c)},J.ensureReport=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(a.__isBugsnagReport)return a;try{var d=J.getStacktrace(a,b,1+c);return new J(a.name,a.message,d)}catch(e){return new J(a.name,a.message,[])}};var O=J,P=function(a,b){var c="000000000"+a;return c.substr(c.length-b)},Q="object"==typeof window?window:self,R=0;for(var S in Q)Object.hasOwnProperty.call(Q,S)&&R++;var T=navigator.mimeTypes?navigator.mimeTypes.length:0,U=P((T+navigator.userAgent.length).toString(36)+R.toString(36),4),V=function(){return U},W=0,X=4,Y=36,Z=Math.pow(Y,X);e.fingerprint=V;var $=e,_=q.isoDate,aa=function(){function a(){f(this,a),this.id=$(),this.startedAt=_(),this._handled=0,this._unhandled=0}return a.prototype.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},a.prototype.trackError=function(a){this[a._handledState.unhandled?"_unhandled":"_handled"]+=1},a}();aa.prototype.toJSON.forceDecirc=!0;var ba=aa,ca=function(a){switch(Object.prototype.toString.call(a)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return a instanceof Error}},da=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},ea=q.map,fa=q.reduce,ga=q.includes,ha=q.isArray,ia=function(){},ja=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.schema,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(g(this,a),!b)throw new Error("new BugsnagClient(notifier, configSchema) requires `notifier` argument");if(!b.name||!b.version||!b.url)throw new Error("new BugsnagClient(notifier, configSchema) - `notifier` requires: `{ name, version, url }`");this.notifier=b,this.configSchema=c,this._configured=!1,this._transport={name:"NULL_TRANSPORT",sendSession:ia,sendReport:ia},this._logger={debug:ia,info:ia,warn:ia,error:ia},this.plugins=[],this.session=d,this.beforeSession=[],this.breadcrumbs=[],this.app={},this.context=void 0,this.device=void 0,this.metaData=void 0,this.request=void 0,this.user={},this.BugsnagReport=O,this.BugsnagBreadcrumb=t,this.BugsnagSession=ba}return a.prototype.configure=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=w.mergeDefaults(da({},this.config,a),this.configSchema);var b=w.validate(this.config,this.configSchema);if(1==!b.valid){var c=new Error("Bugsnag configuration error");throw c.errors=ea(b.errors,function(a){return a.key+" "+a.message+" \n  "+a.value}),c}return"function"==typeof this.config.beforeSend&&(this.config.beforeSend=[this.config.beforeSend]),null!==this.config.appVersion&&(this.app.version=this.config.appVersion),this.config.metaData&&(this.metaData=this.config.metaData),this.config.user&&(this.user=this.config.user),this._configured=!0,this._logger.debug("Loaded!"),this},a.prototype.use=function(a){return this.plugins.push(a),a.init(this)},a.prototype.transport=function(a){return this._transport=a,this},a.prototype.logger=function(a,b){return this._logger=a,this},a.prototype.sessionDelegate=function(a){return this._sessionDelegate=a,this},a.prototype.startSession=function(){return this._sessionDelegate?this._sessionDelegate.startSession(this):(this._logger.warn("No session implementation is installed"),this)},a.prototype.leaveBreadcrumb=function(a,b,c,d){if(!this._configured)throw new Error("Bugsnag must be configured before calling leaveBreadcrumb()");if(a=a||void 0,c="string"==typeof c?c:void 0,d="string"==typeof d?d:void 0,b="object"==typeof b&&null!==b?b:void 0,"string"==typeof a||b){var e=new t(a,b,c,d);return this.breadcrumbs.push(e),this.breadcrumbs.length>this.config.maxBreadcrumbs&&(this.breadcrumbs=this.breadcrumbs.slice(this.breadcrumbs.length-this.config.maxBreadcrumbs)),this}},a.prototype.notify=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._configured)throw new Error("Bugsnag must be configured before calling report()");var c=B(this),d=ka(a,b,this._logger),e=d.err,f=d.errorFramesToSkip,g=d._opts;g&&(b=g),e||(this._logger.warn('Usage error. notify() called with no "error" parameter'),e=new Error('Bugsnag usage error. notify() called with no "error" parameter')),"object"==typeof b&&null!==b||(b={});var h=O.ensureReport(e,f,1);if(h.app=da({releaseStage:c},h.app,this.app),h.context=h.context||b.context||this.context||void 0,h.device=da({},h.device,this.device,b.device),h.request=da({},h.request,this.request,b.request),h.user=da({},h.user,this.user,b.user),h.metaData=da({},h.metaData,this.metaData,b.metaData),h.breadcrumbs=this.breadcrumbs.slice(0),this.session&&(this.session.trackError(h),h.session=this.session),void 0!==b.severity&&(h.severity=b.severity,h._handledState.severityReason={type:"userSpecifiedSeverity"}),ha(this.config.notifyReleaseStages)&&!ga(this.config.notifyReleaseStages,c))return this._logger.warn("Report not sent due to releaseStage/notifyReleaseStages configuration"),!1;var i=h.severity,j=[].concat(b.beforeSend).concat(this.config.beforeSend);return fa(j,function(a,b){return!0===a||"function"==typeof b&&!1===b(h)||!!h.isIgnored()},!1)?(this._logger.debug("Report not sent due to beforeSend callback"),!1):(this.config.autoBreadcrumbs&&this.leaveBreadcrumb(h.errorClass,{errorClass:h.errorClass,errorMessage:h.errorMessage,severity:h.severity,stacktrace:h.stacktrace},"error"),i!==h.severity&&(h._handledState.severityReason={type:"userCallbackSetSeverity"}),this._transport.sendReport(this._logger,this.config,{apiKey:h.apiKey||this.config.apiKey,notifier:this.notifier,events:[h]}),!0)},a}(),ka=function(a,b,c){var d=void 0,e=0,f=void 0;switch(typeof a){case"string":"string"==typeof b?(c.warn("Usage error. notify() called with (string, string) but expected (error, object)"),d=new Error("Bugsnag usage error. notify() called with (string, string) but expected (error, object)"),f={metaData:{notifier:{notifyArgs:[a,b]}}}):(d=new Error(String(a)),e+=2);break;case"number":case"boolean":d=new Error(String(a));break;case"function":c.warn('Usage error. notify() called with a function as "error" parameter'),d=new Error('Bugsnag usage error. notify() called with a function as "error" parameter');break;case"object":null!==a&&(ca(a)||a.__isBugsnagReport)?d=a:null!==a&&la(a)?((d=new Error(a.message||a.errorMessage)).name=a.name||a.errorClass,e+=2):(c.warn('Usage error. notify() called with an unsupported object as "error" parameter. Supply an Error or { name, message } object.'),d=new Error('Bugsnag usage error. notify() called with an unsupported object as "error" parameter. Supply an Error or { name, message } object.'))}return{err:d,errorFramesToSkip:e,_opts:f}},la=function(a){return!("string"!=typeof a.name&&"string"!=typeof a.errorClass||"string"!=typeof a.message&&"string"!=typeof a.errorMessage)},ma=ja,na={init:function(a){var b=0;a.config.beforeSend.push(function(c){return b>=a.config.maxEvents?c.ignore():void b++}),a.refresh=function(){b=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"(number) maxEvents must be a positive integer ≤100",validate:function(a){return v(a)&&100>a}}}},oa={releaseStage:{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"},message:"(string) releaseStage should be set",validate:function(a){return"string"==typeof a&&a.length}},collectUserIp:{defaultValue:function(){return!0},message:"(boolean) collectUserIp should true/false",validate:function(a){return!0===a||!1===a}}},pa=q.map,qa=q.reduce,ra={init:function(a){pa(sa,function(b){var c=console[b];console[b]=function(){for(var d=arguments.length,e=Array(d),f=0;d>f;f++)e[f]=arguments[f];a.leaveBreadcrumb("Console output",qa(e,function(a,b,c){var d=String(b);if("[object Object]"===d)try{d=JSON.stringify(b)}catch(e){}return a["["+c+"]"]=d,a},{severity:0===b.indexOf("group")?"log":b}),"log"),c.apply(console,e)},console[b]._restore=function(){console[b]=c}})},destroy:function(){return sa.forEach(function(a){"function"==typeof console[a]._restore&&console[a]._restore()})},configSchema:{consoleBreadcrumbsEnabled:{defaultValue:function(){return void 0},validate:function(a){return!0===a||!1===a||void 0===a},message:"(boolean) consoleBreadcrumbsEnabled should be true or false"}}},sa=(0,q.filter)(["log","debug","info","warn","error"],function(a){return"undefined"!=typeof console&&"function"==typeof console[a]}),ta={init:function(a){a.config.beforeSend.unshift(function(a){a.context||(a.context=window.location.pathname)})}},ua=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},va=q.isoDate,wa={init:function(a){a.config.beforeSend.unshift(function(a){a.device=ua({time:va(),locale:navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||navigator.language,userAgent:navigator.userAgent},a.device)}),a.beforeSession.push(function(a){a.device={userAgent:navigator.userAgent}})}},xa={},ya=q.reduce,za=/^.*<script.*?>/,Aa=/<\/script>.*$/,Ba=(xa={init:function(a){var b="",c=!1,d=function(){return document.documentElement.outerHTML},e=window.location.href;b=d(),document.onreadystatechange=function(){"interactive"===document.readyState&&(b=d(),c=!0)},a.config.beforeSend.unshift(function(a){var f=a.stacktrace[0];if(!f||!f.file||!f.lineNumber)return f;if(f.file.replace(/#.*$/,"")!==e.replace(/#.*$/,""))return f;c&&b||(b=d());var g=["<!-- DOCUMENT START -->"].concat(b.split("\n")),h=Ba(g,f.lineNumber-1),i=h.script,j=h.start,k=ya(i,function(a,b,c){return Math.abs(j+c+1-f.lineNumber)>10?a:(a[""+(j+c+1)]=b,a)},{});f.code=k,a.updateMetaData("script",{content:i.join("\n")})})}}).extractScriptContent=function(a,b){for(var c=b;c<a.length&&!Aa.test(a[c]);)c++;for(var d=c;c>0&&!za.test(a[c]);)c--;var e=c,f=a.slice(e,d+1);return f[0]=f[0].replace(za,""),f[f.length-1]=f[f.length-1].replace(Aa,""),{script:f,start:e}},Ca={init:function(a){"addEventListener"in window&&window.addEventListener("click",function(b){var c=void 0,d=void 0;try{c=Da(b.target),d=h(b.target)}catch(e){c="[hidden]",d="[hidden]",a._logger.error("Cross domain error when tracking click event. See https://docs.bugsnag.com/platforms/browsers/faq/#3-cross-origin-script-errors")}a.leaveBreadcrumb("UI click",{targetText:c,targetSelector:d},"user")},!0)},configSchema:{interactionBreadcrumbsEnabled:{defaultValue:function(){return void 0},validate:function(a){return!0===a||!1===a||void 0===a},message:"(boolean) interactionBreadcrumbsEnabled should be true or false"}}},Da=function(a){var b=a.textContent||a.innerText||"";return b||"submit"!==a.type&&"button"!==a.type||(b=a.value),b=b.replace(/^\s+|\s+$/g,""),i(b,140)},Ea=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},Fa={init:function(a){a.config.collectUserIp||a.config.beforeSend.push(function(a){a.user=Ea({id:"[NOT COLLECTED]"},a.user),a.request=Ea({clientIp:"[NOT COLLECTED]"},a.request)})}},Ga={init:function(a){if("addEventListener"in window){var b=function(b){return function(){return a.leaveBreadcrumb(b,{},"navigation")}};window.addEventListener("pagehide",b("Page hidden"),!0),window.addEventListener("pageshow",b("Page shown"),!0),window.addEventListener("load",b("Page loaded"),!0),window.document.addEventListener("DOMContentLoaded",b("DOMContentLoaded"),!0),window.addEventListener("load",function(){return window.addEventListener("popstate",b("Navigated back"),!0)}),window.addEventListener("hashchange",function(b){var c=b.oldURL?{from:Ha(b.oldURL),to:Ha(b.newURL),state:window.history.state}:{to:Ha(window.location.href)};a.leaveBreadcrumb("Hash changed",c,"navigation")},!0),window.history.replaceState&&Ja(a,window.history,"replaceState"),window.history.pushState&&Ja(a,window.history,"pushState"),a.leaveBreadcrumb("Bugsnag loaded",{},"navigation")}},destroy:function(){window.history.replaceState._restore(),window.history.pushState._restore()},configSchema:{navigationBreadcrumbsEnabled:{defaultValue:function(){return void 0},validate:function(a){return!0===a||!1===a||void 0===a},message:"(boolean) navigationBreadcrumbsEnabled should be true or false"}}},Ha=function(a){var b=document.createElement("A");return b.href=a,""+b.pathname+b.search+b.hash},Ia=function(a,b,c){var d=Ha(window.location.href);return{title:b,state:a,prevState:window.history.state,to:c||d,from:d}},Ja=function(a,b,c){var d=b[c];b[c]=function(e,f,g){a.leaveBreadcrumb("History "+c,Ia(e,f,g),"navigation"),"function"==typeof a.refresh&&a.refresh(),a.session&&a.startSession(),d.call(b,e,f,g)},b[c]._restore=function(){b[c]=d}},Ka=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},La={init:function(a){a.config.beforeSend.unshift(function(a){a.request&&a.request.url||(a.request=Ka({},a.request,{url:window.location.href}))})}},Ma=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},Na=q.map,Oa=q.isArray,Pa=q.includes,Qa={init:function(a){return a.sessionDelegate(Ra)}},Ra={startSession:function(a){var b=a;b.session=new a.BugsnagSession,Na(b.beforeSession,function(a){return a(b)});var c=B(b);return Oa(b.config.notifyReleaseStages)&&!Pa(b.config.notifyReleaseStages,c)?(b._logger.warn("Session not sent due to releaseStage/notifyReleaseStages configuration"),b):(b._transport.sendSession(b._logger,b.config,{notifier:b.notifier,device:b.device,app:Ma({releaseStage:c},b.app),sessions:[{id:b.session.id,startedAt:b.session.startedAt,user:b.user}]}),b)}},Sa={},Ta=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},Ua=q.map,Va=(Sa={init:function(a){a.config.beforeSend.push(function(a){a.stacktrace=Ua(a.stacktrace,function(a){return Ta({},a,{file:Va(a.file)})})})}})._strip=function(a){return"string"==typeof a?a.replace(/\?.*$/,"").replace(/#.*$/,""):a},Wa=q.reduce,Xa=void 0,Ya={init:function(a){var b=function(b){var c=b.reason,d=!1;b.detail&&b.detail.reason&&(c=b.detail.reason,d=!0);var e={severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},f=void 0;c&&C(c)?(f=new a.BugsnagReport(c.name,c.message,E.parse(c),e),d&&(f.stacktrace=Wa(f.stacktrace,$a(c),[]))):(f=new a.BugsnagReport(c&&c.name?c.name:"UnhandledRejection",c&&c.message?c.message:'Rejection reason was not an Error. See "Promise" tab for more detail.',[],e)).updateMetaData("promise","rejection reason",Za(c)),a.notify(f)};"addEventListener"in window?window.addEventListener("unhandledrejection",b):window.onunhandledrejection=function(a,c){b({detail:{reason:a,promise:c}})},Xa=b},destroy:function(){Xa&&("addEventListener"in window?window.removeEventListener("unhandledrejection",Xa):window.onunhandledrejection=null),Xa=null}},Za=function(a){if(null===a||void 0===a)return"undefined (or null)";if(ca(a)){var b;return b={},b[Object.prototype.toString.call(a)]={name:a.name,message:a.message,code:a.code,stack:a.stack},b}return a},$a=function(a){return function(b,c){return c.file===a.toString()?b:(c.method&&(c.method=c.method.replace(/^\s+/,"")),b.concat(c))}},_a={init:function(a){var b=window.onerror;window.onerror=function(c,d,e,f,g){if(0===e&&/Script error\.?/.test(c))a._logger.warn("Ignoring cross-domain or eval script error. See https://docs.bugsnag.com/platforms/browsers/faq/#3-cross-origin-script-errors");else{var h={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},i=void 0;if(g)g.name&&g.message?i=new a.BugsnagReport(g.name,g.message,ab(a.BugsnagReport.getStacktrace(g),d,e,f),h):(i=new a.BugsnagReport("window.onerror",String(g),ab(a.BugsnagReport.getStacktrace(g,1),d,e,f),h)).updateMetaData("window onerror",{error:g});else if("object"!=typeof c||null===c||d||e||f||g)(i=new a.BugsnagReport("window.onerror",String(c),ab(a.BugsnagReport.getStacktrace(g,1),d,e,f),h)).updateMetaData("window onerror",{event:c});else{var j=c.type?"Event: "+c.type:"window.onerror",k=c.message||c.detail||"";(i=new a.BugsnagReport(j,k,a.BugsnagReport.getStacktrace(new Error,1).slice(1),h)).updateMetaData("window onerror",{event:c})}a.notify(i),"function"==typeof b&&b(c,d,e,f,g)}}}},ab=function(a,b,c,d){var e=a[0];return e?(e.fileName||e.setFileName(b),e.lineNumber||e.setLineNumber(c),e.columnNumber||(void 0!==d?e.setColumnNumber(d):window.event&&window.event.errorCharacter&&e.setColumnNumber(window.event&&window.event.errorCharacter)),a):a},bb=j;j["default"]=j,k.prototype.toJSON=function(){return 0==--this.count&&(this.parent[this.k]=this.val),"[Circular]"};var cb=function(a){var b=bb(a);if(b.length>1e6&&(delete a.events[0].metaData,a.events[0].metaData={notifier:"WARNING!\nThe serialized payload was "+b.length/1e6+"MB. The limit is 1MB.\nreport.metaData was stripped to make the payload of a deliverable size."},(b=bb(a)).length>1e6))throw new Error("payload exceeded 1MB limit");
return b},db={},eb=q.isoDate,fb=(db={name:"XDomainRequest",sendReport:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},e=fb(b.endpoint,window.location.protocol)+"?apiKey="+encodeURIComponent(b.apiKey)+"&payloadVersion=4.0&sentAt="+encodeURIComponent(eb()),f=new window.XDomainRequest;f.onload=function(){d(null,f.responseText)},f.open("POST",e),setTimeout(function(){try{f.send(cb(c))}catch(b){a.error(b)}},0)},sendSession:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},e=fb(b.sessionEndpoint,window.location.protocol)+"?apiKey="+encodeURIComponent(b.apiKey)+"&payloadVersion=1.0&sentAt="+encodeURIComponent(eb()),f=new window.XDomainRequest;f.onload=function(){d(null,f.responseText)},f.open("POST",e),setTimeout(function(){try{f.send(bb(c))}catch(b){a.error(b)}},0)}})._matchPageProtocol=function(a,b){return"http:"===b?a.replace(/^https:/,"http:"):a},gb=q.isoDate,hb={name:"XMLHttpRequest",sendReport:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},e=b.endpoint,f=new window.XMLHttpRequest;f.onreadystatechange=function(){f.readyState===window.XMLHttpRequest.DONE&&d(null,f.responseText)},f.open("POST",e),f.setRequestHeader("Content-Type","application/json"),f.setRequestHeader("Bugsnag-Api-Key",c.apiKey||b.apiKey),f.setRequestHeader("Bugsnag-Payload-Version","4.0"),f.setRequestHeader("Bugsnag-Sent-At",gb());try{f.send(cb(c))}catch(g){a.error(g)}},sendSession:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},e=b.sessionEndpoint,f=new window.XMLHttpRequest;f.onreadystatechange=function(){f.readyState===window.XMLHttpRequest.DONE&&d(null,f.responseText)},f.open("POST",e),f.setRequestHeader("Content-Type","application/json"),f.setRequestHeader("Bugsnag-Api-Key",b.apiKey),f.setRequestHeader("Bugsnag-Payload-Version","1.0"),f.setRequestHeader("Bugsnag-Sent-At",gb());try{f.send(bb(c))}catch(g){a.error(g)}}},ib={},jb=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},kb=q.map,lb=q.reduce,mb=jb({},w.schema,oa),nb=[_a,Ya,wa,ta,La,na,ra,Ga,Ca,xa,Qa,Fa,Sa],ob={XDomainRequest:db,XMLHttpRequest:hb};ib=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];"string"==typeof a&&(a={apiKey:a}),a.sessionTrackingEnabled&&(a.autoCaptureSessions=a.sessionTrackingEnabled);var c=lb([].concat(nb).concat(b),function(a,b){return b.configSchema?jb({},a,b.configSchema):a},mb),d=new ma({name:"Bugsnag JavaScript",version:"4.4.0",url:"https://github.com/bugsnag/bugsnag-js"},c);if(d.transport(window.XDomainRequest?ob.XDomainRequest:ob.XMLHttpRequest),"undefined"!=typeof console&&"function"==typeof console.debug){var e=pb();d.logger(e)}try{d.configure(a)}catch(f){throw d._logger.warn(f),f.errors&&kb(f.errors,d._logger.warn),f}return d.use(wa),d.use(ta),d.use(La),d.use(xa),d.use(na),d.use(Qa),d.use(Fa),d.use(Sa),!1!==d.config.autoNotify&&(d.use(_a),d.use(Ya)),qb(d.config,"navigationBreadcrumbsEnabled")&&d.use(Ga),qb(d.config,"interactionBreadcrumbsEnabled")&&d.use(Ca),qb(d.config,"consoleBreadcrumbsEnabled",!1)&&d.use(ra),kb(b,function(a){return d.use(a)}),d.config.autoCaptureSessions?d.startSession():d};var pb=function(){var a={},b=console.log;return kb(["debug","info","warn","error"],function(c){var d=console[c];a[c]="function"==typeof d?d.bind(console,"[bugsnag]"):b.bind(console,"[bugsnag]")}),a},qb=function(a,b){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return"boolean"==typeof a[b]?a[b]:a.autoBreadcrumbs&&(c||!/^dev(elopment)?$/.test(a.releaseStage))};return ib.Bugsnag={Client:ma,Report:O,Session:ba,Breadcrumb:t},ib["default"]=ib,ib}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(a,b,c,d,e,f){function g(a,b){var c=typeof a[b];return"function"==c||!("object"!=c||!a[b])||"unknown"==c}function h(a,b){return!("object"!=typeof a[b]||!a[b])}function i(a){return"[object Array]"===Object.prototype.toString.call(a)}function j(){var a="Shockwave Flash",b="application/x-shockwave-flash";if(!t(navigator.plugins)&&"object"==typeof navigator.plugins[a]){var c=navigator.plugins[a].description;c&&!t(navigator.mimeTypes)&&navigator.mimeTypes[b]&&navigator.mimeTypes[b].enabledPlugin&&(C=c.match(/\d+/g))}if(!C){var d;try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),C=Array.prototype.slice.call(d.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),d=null}catch(e){}}if(!C)return!1;var f=parseInt(C[0],10),g=parseInt(C[1],10);return D=f>9&&g>0,!0}function k(){if(!S){S=!0;for(var a=0;a<T.length;a++)T[a]();T.length=0}}function l(a,b){return S?void a.call(b):void T.push(function(){a.call(b)})}function m(){var a=parent;if(""!==M)for(var b=0,c=M.split(".");b<c.length;b++)a=a[c[b]];return a.easyXDM}function n(b){return a.easyXDM=O,M=b,M&&(P="easyXDM_"+M.replace(".","_")+"_"),N}function o(a){return a.match(J)[3]}function p(a){return a.match(J)[4]||""}function q(a){var b=a.toLowerCase().match(J),c=b[2],d=b[3],e=b[4]||"";return("http:"==c&&":80"==e||"https:"==c&&":443"==e)&&(e=""),c+"//"+d+e}function r(a){if(a=a.replace(L,"$1/"),!a.match(/^(http||https):\/\//)){var b="/"===a.substring(0,1)?"":c.pathname;"/"!==b.substring(b.length-1)&&(b=b.substring(0,b.lastIndexOf("/")+1)),a=c.protocol+"//"+c.host+b+a}for(;K.test(a);)a=a.replace(K,"");return a}function s(a,b){var c="",d=a.indexOf("#");-1!==d&&(c=a.substring(d),a=a.substring(0,d));var e=[];for(var g in b)b.hasOwnProperty(g)&&e.push(g+"="+f(b[g]));return a+(Q?"#":-1==a.indexOf("?")?"?":"&")+e.join("&")+c}function t(a){return"undefined"==typeof a}function u(a,b,c){var d;for(var e in b)b.hasOwnProperty(e)&&(e in a?(d=b[e],"object"==typeof d?u(a[e],d,c):c||(a[e]=b[e])):a[e]=b[e]);return a}function v(){var a=b.body.appendChild(b.createElement("form")),c=a.appendChild(b.createElement("input"));c.name=P+"TEST"+H,B=c!==a.elements[c.name],b.body.removeChild(a)}function w(a){t(B)&&v();var c;B?c=b.createElement('<iframe name="'+a.props.name+'"/>'):(c=b.createElement("IFRAME"),c.name=a.props.name),c.id=c.name=a.props.name,delete a.props.name,"string"==typeof a.container&&(a.container=b.getElementById(a.container)),a.container||(u(c.style,{position:"absolute",top:"-2000px",left:"0px"}),a.container=b.body);var d=a.props.src;if(a.props.src="javascript:false",u(c,a.props),c.border=c.frameBorder=0,c.allowTransparency=!0,a.container.appendChild(c),a.onLoad&&E(c,"load",a.onLoad),a.usePost){var e,f=a.container.appendChild(b.createElement("form"));if(f.target=c.name,f.action=d,f.method="POST","object"==typeof a.usePost)for(var g in a.usePost)a.usePost.hasOwnProperty(g)&&(B?e=b.createElement('<input name="'+g+'"/>'):(e=b.createElement("INPUT"),e.name=g),e.value=a.usePost[g],f.appendChild(e));f.submit(),f.parentNode.removeChild(f)}else c.src=d;return a.props.src=d,c}function x(a,b){"string"==typeof a&&(a=[a]);for(var c,d=a.length;d--;)if(c=a[d],c=new RegExp("^"==c.substr(0,1)?c:"^"+c.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),c.test(b))return!0;return!1}function y(d){var e,f=d.protocol;if(d.isHost=d.isHost||t(V.xdm_p),Q=d.hash||!1,d.props||(d.props={}),d.isHost)d.remote=r(d.remote),d.channel=d.channel||"default"+H++,d.secret=Math.random().toString(16).substring(2),t(f)&&(f=q(c.href)==q(d.remote)?"4":g(a,"postMessage")||g(b,"postMessage")?"1":d.swf&&g(a,"ActiveXObject")&&j()?"6":"Gecko"===navigator.product&&"frameElement"in a&&-1==navigator.userAgent.indexOf("WebKit")?"5":d.remoteHelper?"2":"0");else if(d.channel=V.xdm_c.replace(/["'<>\\]/g,""),d.secret=V.xdm_s,d.remote=V.xdm_e.replace(/["'<>\\]/g,""),f=V.xdm_p,d.acl&&!x(d.acl,d.remote))throw new Error("Access denied for "+d.remote);switch(d.protocol=f,f){case"0":if(u(d,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),d.isHost){if(!d.local){for(var h,i=c.protocol+"//"+c.host,k=b.body.getElementsByTagName("img"),l=k.length;l--;)if(h=k[l],h.src.substring(0,i.length)===i){d.local=h.src;break}d.local||(d.local=a)}var m={xdm_c:d.channel,xdm_p:0};d.local===a?(d.usePolling=!0,d.useParent=!0,d.local=c.protocol+"//"+c.host+c.pathname+c.search,m.xdm_e=d.local,m.xdm_pa=1):m.xdm_e=r(d.local),d.container&&(d.useResize=!1,m.xdm_po=1),d.remote=s(d.remote,m)}else u(d,{channel:V.xdm_c,remote:V.xdm_e,useParent:!t(V.xdm_pa),usePolling:!t(V.xdm_po),useResize:d.useParent?!1:d.useResize});e=[new N.stack.HashTransport(d),new N.stack.ReliableBehavior({}),new N.stack.QueueBehavior({encode:!0,maxLength:4e3-d.remote.length}),new N.stack.VerifyBehavior({initiate:d.isHost})];break;case"1":e=[new N.stack.PostMessageTransport(d)];break;case"2":d.isHost&&(d.remoteHelper=r(d.remoteHelper)),e=[new N.stack.NameTransport(d),new N.stack.QueueBehavior,new N.stack.VerifyBehavior({initiate:d.isHost})];break;case"3":e=[new N.stack.NixTransport(d)];break;case"4":e=[new N.stack.SameOriginTransport(d)];break;case"5":e=[new N.stack.FrameElementTransport(d)];break;case"6":C||j(),e=[new N.stack.FlashTransport(d)]}return e.push(new N.stack.QueueBehavior({lazy:d.lazy,remove:!0})),e}function z(a){for(var b,c={incoming:function(a,b){this.up.incoming(a,b)},outgoing:function(a,b){this.down.outgoing(a,b)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},d=0,e=a.length;e>d;d++)b=a[d],u(b,c,!0),0!==d&&(b.down=a[d-1]),d!==e-1&&(b.up=a[d+1]);return b}function A(a){a.up.down=a.down,a.down.up=a.up,a.up=a.down=null}var B,C,D,E,F,G=this,H=Math.floor(1e4*Math.random()),I=Function.prototype,J=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,K=/[\-\w]+\/\.\.\//,L=/([^:])\/\//g,M="",N={},O=a.easyXDM,P="easyXDM_",Q=!1;if(g(a,"addEventListener"))E=function(a,b,c){a.addEventListener(b,c,!1)},F=function(a,b,c){a.removeEventListener(b,c,!1)};else{if(!g(a,"attachEvent"))throw new Error("Browser not supported");E=function(a,b,c){a.attachEvent("on"+b,c)},F=function(a,b,c){a.detachEvent("on"+b,c)}}var R,S=!1,T=[];if("readyState"in b?(R=b.readyState,S="complete"==R||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==R||"interactive"==R)):S=!!b.body,!S){if(g(a,"addEventListener"))E(b,"DOMContentLoaded",k);else if(E(b,"readystatechange",function(){"complete"==b.readyState&&k()}),b.documentElement.doScroll&&a===top){var U=function(){if(!S){try{b.documentElement.doScroll("left")}catch(a){return void d(U,1)}k()}};U()}E(a,"load",k)}var V=function(a){a=a.substring(1).split("&");for(var b,c={},d=a.length;d--;)b=a[d].split("="),c[b[0]]=e(b[1]);return c}(/xdm_e=/.test(c.search)?c.search:c.hash),W=function(){var a={},b={a:[1,2,3]},c='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(b).replace(/\s/g,"")===c?JSON:(Object.toJSON&&Object.toJSON(b).replace(/\s/g,"")===c&&(a.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(b=c.evalJSON(),b.a&&3===b.a.length&&3===b.a[2]&&(a.parse=function(a){return a.evalJSON()})),a.stringify&&a.parse?(W=function(){return a},a):null)};u(N,{version:"2.4.18.25",query:V,stack:{},apply:u,getJSONObject:W,whenReady:l,noConflict:n}),N.DomHelper={on:E,un:F,requiresJSON:function(c){h(a,"JSON")||b.write('<script type="text/javascript" src="'+c+'"></script>')}},function(){var a={};N.Fn={set:function(b,c){a[b]=c},get:function(b,c){var d=a[b];return c&&delete a[b],d}}}(),N.Socket=function(a){var b=z(y(a).concat([{incoming:function(b,c){a.onMessage(b,c)},callback:function(b){a.onReady&&a.onReady(b)}}])),c=q(a.remote);this.origin=q(a.remote),this.destroy=function(){b.destroy()},this.postMessage=function(a){b.outgoing(a,c)},b.init()},N.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var d=b.local[c];"function"==typeof d&&(b.local[c]={method:d})}var e=z(y(a).concat([new N.stack.RpcBehavior(this,b),{callback:function(b){a.onReady&&a.onReady(b)}}]));this.origin=q(a.remote),this.destroy=function(){e.destroy()},e.init()},N.stack.SameOriginTransport=function(a){var b,e,f,g;return b={outgoing:function(a,b,c){f(a),c&&c()},destroy:function(){e&&(e.parentNode.removeChild(e),e=null)},onDOMReady:function(){g=q(a.remote),a.isHost?(u(a.props,{src:s(a.remote,{xdm_e:c.protocol+"//"+c.host+c.pathname,xdm_c:a.channel,xdm_p:4}),name:P+a.channel+"_provider"}),e=w(a),N.Fn.set(a.channel,function(a){return f=a,d(function(){b.up.callback(!0)},0),function(a){b.up.incoming(a,g)}})):(f=m().Fn.get(a.channel,!0)(function(a){b.up.incoming(a,g)}),d(function(){b.up.callback(!0)},0))},init:function(){l(b.onDOMReady,b)}}},N.stack.FlashTransport=function(a){function e(a,b){d(function(){h.up.incoming(a,j)},0)}function g(c){var d=a.swf+"?host="+a.isHost,e="easyXDM_swf_"+Math.floor(1e4*Math.random());N.Fn.set("flash_loaded"+c.replace(/[\-.]/g,"_"),function(){N.stack.FlashTransport[c].swf=k=m.firstChild;for(var a=N.stack.FlashTransport[c].queue,b=0;b<a.length;b++)a[b]();a.length=0}),a.swfContainer?m="string"==typeof a.swfContainer?b.getElementById(a.swfContainer):a.swfContainer:(m=b.createElement("div"),u(m.style,D&&a.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),b.body.appendChild(m));var g="callback=flash_loaded"+f(c.replace(/[\-.]/g,"_"))+"&proto="+G.location.protocol+"&domain="+f(o(G.location.href))+"&port="+f(p(G.location.href))+"&ns="+f(M);m.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+e+"' data='"+d+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+d+"'></param><param name='flashvars' value='"+g+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+g+"' allowScriptAccess='always' wmode='transparent' src='"+d+"' height='1' width='1'></embed></object>"}var h,i,j,k,m;return h={outgoing:function(b,c,d){k.postMessage(a.channel,b.toString()),d&&d()},destroy:function(){try{k.destroyChannel(a.channel)}catch(b){}k=null,i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){j=a.remote,N.Fn.set("flash_"+a.channel+"_init",function(){d(function(){h.up.callback(!0)})}),N.Fn.set("flash_"+a.channel+"_onMessage",e),a.swf=r(a.swf);var b=o(a.swf),f=function(){N.stack.FlashTransport[b].init=!0,k=N.stack.FlashTransport[b].swf,k.createChannel(a.channel,a.secret,q(a.remote),a.isHost),a.isHost&&(D&&a.swfNoThrottle&&u(a.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),u(a.props,{src:s(a.remote,{xdm_e:q(c.href),xdm_c:a.channel,xdm_p:6,xdm_s:a.secret}),name:P+a.channel+"_provider"}),i=w(a))};N.stack.FlashTransport[b]&&N.stack.FlashTransport[b].init?f():N.stack.FlashTransport[b]?N.stack.FlashTransport[b].queue.push(f):(N.stack.FlashTransport[b]={queue:[f]},g(b))},init:function(){l(h.onDOMReady,h)}}},N.stack.PostMessageTransport=function(b){function e(a){if(a.origin)return q(a.origin);if(a.uri)return q(a.uri);if(a.domain)return c.protocol+"//"+a.domain;throw"Unable to retrieve the origin of the event"}function f(a){var c=e(a);c==j&&a.data.substring(0,b.channel.length+1)==b.channel+" "&&g.up.incoming(a.data.substring(b.channel.length+1),c)}var g,h,i,j;return g={outgoing:function(a,c,d){i.postMessage(b.channel+" "+a,c||j),d&&d()},destroy:function(){F(a,"message",f),h&&(i=null,h.parentNode.removeChild(h),h=null)},onDOMReady:function(){if(j=q(b.remote),b.isHost){var e=function(c){c.data==b.channel+"-ready"&&(i="postMessage"in h.contentWindow?h.contentWindow:h.contentWindow.document,F(a,"message",e),E(a,"message",f),d(function(){g.up.callback(!0)},0))};E(a,"message",e),u(b.props,{src:s(b.remote,{xdm_e:q(c.href),xdm_c:b.channel,xdm_p:1}),name:P+b.channel+"_provider"}),h=w(b)}else E(a,"message",f),i="postMessage"in a.parent?a.parent:a.parent.document,i.postMessage(b.channel+"-ready",j),d(function(){g.up.callback(!0)},0)},init:function(){l(g.onDOMReady,g)}}},N.stack.FrameElementTransport=function(e){var f,g,h,i;return f={outgoing:function(a,b,c){h.call(this,a),c&&c()},destroy:function(){g&&(g.parentNode.removeChild(g),g=null)},onDOMReady:function(){i=q(e.remote),e.isHost?(u(e.props,{src:s(e.remote,{xdm_e:q(c.href),xdm_c:e.channel,xdm_p:5}),name:P+e.channel+"_provider"}),g=w(e),g.fn=function(a){return delete g.fn,h=a,d(function(){f.up.callback(!0)},0),function(a){f.up.incoming(a,i)}}):(b.referrer&&q(b.referrer)!=V.xdm_e&&(a.top.location=V.xdm_e),h=a.frameElement.fn(function(a){f.up.incoming(a,i)}),f.up.callback(!0))},init:function(){l(f.onDOMReady,f)}}},N.stack.NameTransport=function(a){function b(b){var c=a.remoteHelper+(h?"#_3":"#_2")+a.channel;i.contentWindow.sendMessage(b,c)}function c(){h?2!==++k&&h||g.up.callback(!0):(b("ready"),g.up.callback(!0))}function e(a){g.up.incoming(a,n)}function f(){m&&d(function(){m(!0)},0)}var g,h,i,j,k,m,n,o;return g={outgoing:function(a,c,d){m=d,b(a)},destroy:function(){i.parentNode.removeChild(i),i=null,h&&(j.parentNode.removeChild(j),j=null)},onDOMReady:function(){h=a.isHost,k=0,n=q(a.remote),a.local=r(a.local),h?(N.Fn.set(a.channel,function(b){h&&"ready"===b&&(N.Fn.set(a.channel,e),c())}),o=s(a.remote,{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),u(a.props,{src:o+"#"+a.channel,name:P+a.channel+"_provider"}),j=w(a)):(a.remoteHelper=a.remote,N.Fn.set(a.channel,e));var b=function(){var e=i||this;F(e,"load",b),N.Fn.set(a.channel+"_load",f),function g(){"function"==typeof e.contentWindow.sendMessage?c():d(g,50)}()};i=w({props:{src:a.local+"#_4"+a.channel},onLoad:b})},init:function(){l(g.onDOMReady,g)}}},N.stack.HashTransport=function(b){function c(a){if(p){var c=b.remote+"#"+n++ +"_"+a;(i||!r?p.contentWindow:p).location=c}}function e(a){m=a,h.up.incoming(m.substring(m.indexOf("_")+1),s)}function f(){if(o){var a=o.location.href,b="",c=a.indexOf("#");-1!=c&&(b=a.substring(c)),b&&b!=m&&e(b)}}function g(){j=setInterval(f,k)}var h,i,j,k,m,n,o,p,r,s;return h={outgoing:function(a,b){c(a)},destroy:function(){a.clearInterval(j),(i||!r)&&p.parentNode.removeChild(p),p=null},onDOMReady:function(){if(i=b.isHost,k=b.interval,m="#"+b.channel,n=0,r=b.useParent,s=q(b.remote),i){if(u(b.props,{src:b.remote,name:P+b.channel+"_provider"}),r)b.onLoad=function(){o=a,g(),h.up.callback(!0)};else{var c=0,e=b.delay/50;!function f(){if(++c>e)throw new Error("Unable to reference listenerwindow");try{o=p.contentWindow.frames[P+b.channel+"_consumer"]}catch(a){}o?(g(),h.up.callback(!0)):d(f,50)}()}p=w(b)}else o=a,g(),r?(p=parent,h.up.callback(!0)):(u(b,{props:{src:b.remote+"#"+b.channel+new Date,name:P+b.channel+"_consumer"},onLoad:function(){h.up.callback(!0)}}),p=w(b))},init:function(){l(h.onDOMReady,h)}}},N.stack.ReliableBehavior=function(a){var b,c,d=0,e=0,f="";return b={incoming:function(a,g){var h=a.indexOf("_"),i=a.substring(0,h).split(",");a=a.substring(h+1),i[0]==d&&(f="",c&&c(!0)),a.length>0&&(b.down.outgoing(i[1]+","+d+"_"+f,g),e!=i[1]&&(e=i[1],b.up.incoming(a,g)))},outgoing:function(a,g,h){f=a,c=h,b.down.outgoing(e+","+ ++d+"_"+a,g)}}},N.stack.QueueBehavior=function(a){function b(){if(a.remove&&0===h.length)return void A(c);if(!i&&0!==h.length&&!g){i=!0;var e=h.shift();c.down.outgoing(e.data,e.origin,function(a){i=!1,e.callback&&d(function(){e.callback(a)},0),b()})}}var c,g,h=[],i=!0,j="",k=0,l=!1,m=!1;return c={init:function(){t(a)&&(a={}),a.maxLength&&(k=a.maxLength,m=!0),a.lazy?l=!0:c.down.init()},callback:function(a){i=!1;var d=c.up;b(),d.callback(a)},incoming:function(b,d){if(m){var f=b.indexOf("_"),g=parseInt(b.substring(0,f),10);j+=b.substring(f+1),0===g&&(a.encode&&(j=e(j)),c.up.incoming(j,d),j="")}else c.up.incoming(b,d)},outgoing:function(d,e,g){a.encode&&(d=f(d));var i,j=[];if(m){for(;0!==d.length;)i=d.substring(0,k),d=d.substring(i.length),j.push(i);for(;i=j.shift();)h.push({data:j.length+"_"+i,origin:e,callback:0===j.length?g:null})}else h.push({data:d,origin:e,callback:g});l?c.down.init():b()},destroy:function(){g=!0,c.down.destroy()}}},N.stack.VerifyBehavior=function(a){function b(){d=Math.random().toString(16).substring(2),c.down.outgoing(d)}var c,d,e;return c={incoming:function(f,g){var h=f.indexOf("_");-1===h?f===d?c.up.callback(!0):e||(e=f,a.initiate||b(),c.down.outgoing(f)):f.substring(0,h)===e&&c.up.incoming(f.substring(h+1),g)},outgoing:function(a,b,e){c.down.outgoing(d+"_"+a,b,e)},callback:function(c){a.initiate&&b()}}},N.stack.RpcBehavior=function(a,b){function c(a){a.jsonrpc="2.0",f.down.outgoing(g.stringify(a))}function d(a,b){var d=Array.prototype.slice;return function(){var e,f=arguments.length,g={method:b};f>0&&"function"==typeof arguments[f-1]?(f>1&&"function"==typeof arguments[f-2]?(e={success:arguments[f-2],error:arguments[f-1]},g.params=d.call(arguments,0,f-2)):(e={success:arguments[f-1]},g.params=d.call(arguments,0,f-1)),j[""+ ++h]=e,g.id=h):g.params=d.call(arguments,0),a.namedParams&&1===g.params.length&&(g.params=g.params[0]),c(g)}}function e(a,b,d,e){if(!d)return void(b&&c({id:b,error:{code:-32601,message:"Procedure not found."}}));var f,g;b?(f=function(a){f=I,c({id:b,result:a})},g=function(a,d){g=I;var e={id:b,error:{code:-32099,message:a}};d&&(e.error.data=d),c(e)}):f=g=I,i(e)||(e=[e]);try{var h=d.method.apply(d.scope,e.concat([f,g]));t(h)||f(h)}catch(j){g(j.message)}}var f,g=b.serializer||W(),h=0,j={};return f={incoming:function(a,d){var f=g.parse(a);if(f.method)b.handle?b.handle(f,c):e(f.method,f.id,b.local[f.method],f.params);else{var h=j[f.id];f.error?h.error&&h.error(f.error):h.success&&h.success(f.result),delete j[f.id]}},init:function(){if(b.remote)for(var c in b.remote)b.remote.hasOwnProperty(c)&&(a[c]=d(b.remote[c],c));f.down.init()},destroy:function(){for(var c in b.remote)b.remote.hasOwnProperty(c)&&a.hasOwnProperty(c)&&delete a[c];f.down.destroy()}}},G.easyXDM=N}(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b,c){return!0}function e(a,b,c,e){return a.global?d(b||y,c,e):void 0}function f(a){a.global&&0===conektaAjax.active++&&e(a,null,"ajaxStart")}function g(a){a.global&&!--conektaAjax.active&&e(a,null,"ajaxStop")}function h(a,b){var c=b.context;return b.beforeSend.call(c,a,b)===!1||e(b,c,"ajaxBeforeSend",[a,b])===!1?!1:void e(b,c,"ajaxSend",[a,b])}function i(a,b,c){var d=c.context,f="success";c.success.call(d,a,f,b),e(c,d,"ajaxSuccess",[b,c,a]),k(f,b,c)}function j(a,b,c,d){var f=d.context;d.error.call(f,c,b,a),e(d,f,"ajaxError",[c,d,a]),k(b,c,d)}function k(a,b,c){var d=c.context;c.complete.call(d,b,a),e(c,d,"ajaxComplete",[b,c]),g(c)}function l(){}function m(a){return a&&(a==C?"html":a==B?"json":z.test(a)?"script":A.test(a)&&"xml")||"text"}function n(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function o(a){"object"===s(a.data)&&(a.data=q(a.data)),!a.data||a.type&&"GET"!=a.type.toUpperCase()||(a.url=n(a.url,a.data))}function p(a,b,c,d){var e="array"===s(b);for(var f in b){var g=b[f];d&&(f=c?d:d+"["+(e?"":f)+"]"),!d&&e?a.add(g.name,g.value):(c?"array"===s(g):"object"===s(g))?p(a,g,c,f):a.add(f,g)}}function q(a,b){var c=[];return c.add=function(a,b){this.push(E(a)+"="+E(b))},p(c,a,b),c.join("&").replace("%20","+")}function r(a){for(var b=Array.prototype.slice,c=b.call(arguments,1),d=c.length,e=0;d>e;e++){source=c[e];for(v in source)void 0!==source[v]&&(a[v]=source[v])}return a}var s;try{s=a("type-of")}catch(t){var u=a;s=u("type")}var v,w,x=0,y=window.document,z=/^(?:text|application)\/javascript/i,A=/^(?:text|application)\/xml/i,B="application/json",C="text/html",D=/^\s*$/;window.conektaAjax=b.exports=function(a){var b=r({},a||{});for(v in conektaAjax.settings)void 0===b[v]&&(b[v]=conektaAjax.settings[v]);f(b),b.crossDomain||(b.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(b.url)&&RegExp.$2!=window.location.host);var c=b.dataType,d=/=\?/.test(b.url);if("jsonp"==c||d)return d||(b.url=n(b.url,"callback=?")),conektaAjax.JSONP(b);b.url||(b.url=window.location.toString()),o(b);var e,g=b.accepts[c],k={},p=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:window.location.protocol,q=conektaAjax.settings.xhr();b.crossDomain||(k["X-Requested-With"]="XMLHttpRequest"),g&&(k.Accept=g,g.indexOf(",")>-1&&(g=g.split(",",2)[0]),q.overrideMimeType&&q.overrideMimeType(g)),(b.contentType||b.data&&"GET"!=b.type.toUpperCase())&&(k["Content-Type"]=b.contentType||"application/x-www-form-urlencoded"),b.headers=r(k,b.headers||{}),q.onreadystatechange=function(){if(4==q.readyState){clearTimeout(e);var a,d=!1;if(q.status>=200&&q.status<300||304==q.status||0==q.status&&"file:"==p){c=c||m(q.getResponseHeader("content-type")),a=q.responseText;try{"script"==c?(1,eval)(a):"xml"==c?a=q.responseXML:"json"==c&&(a=D.test(a)?null:JSON.parse(a))}catch(f){d=f}d?j(d,"parsererror",q,b):i(a,q,b)}else j(null,"error",q,b)}};var s="async"in b?b.async:!0;q.open(b.type,b.url,s);for(w in b.headers)q.setRequestHeader(w,b.headers[w]);return h(q,b)===!1?(q.abort(),!1):(b.timeout>0&&(e=setTimeout(function(){q.onreadystatechange=l,q.abort(),j(null,"timeout",q,b)},b.timeout)),q.send(b.data?b.data:null),q)},conektaAjax.active=0,conektaAjax.JSONP=function(a){if(!("type"in a))return conektaAjax(a);var b="jsonp"+ ++x;a.jsonpCallback&&(b=a.jsonpCallback);var c,d=y.createElement("script"),e=function(){b in window&&(window[b]=l),k("abort",f,a)},f={abort:e},g=y.getElementsByTagName("head")[0]||y.documentElement;return a.error&&(d.onerror=function(){f.abort(),a.error()}),window[b]=function(d){clearTimeout(c);try{delete window[b]}catch(e){window[b]=void 0}i(d,f,a)},o(a),d.src=a.url.replace(/=\?/,"="+b),g.insertBefore(d,g.firstChild),a.timeout>0&&(c=setTimeout(function(){f.abort(),k("timeout",f,a)},a.timeout)),f},conektaAjax.settings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:B,xml:"application/xml, text/xml",html:C,text:"text/plain"},crossDomain:!1,timeout:0},conektaAjax.get=function(a,b){return conektaAjax({url:a,success:b})},conektaAjax.post=function(a,b,c,d){return"function"===s(b)&&(d=d||c,c=b,b=null),conektaAjax({type:"POST",url:a,data:b,success:c,dataType:d})},conektaAjax.getJSON=function(a,b){return conektaAjax({url:a,success:b,dataType:"json"})};var E=encodeURIComponent},{"type-of":2}],2:[function(a,b,c){var d=Object.prototype.toString;b.exports=function(a){switch(d.call(a)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}return null===a?"null":void 0===a?"undefined":a&&1===a.nodeType?"element":a===Object(a)?"object":typeof a}},{}]},{},[1]),function(){window.ConektaVersion||(window.ConektaVersion={version:"v2.0.0",api:"0.3.0",build:"2.0.17"})}.call(this),function(){function a(){try{var a="__conekta_key_test__";localStorage.setItem(a,a);var b=localStorage.getItem(a);return localStorage.removeItem(a),b===a}catch(c){return!1}}function b(){try{var a="__conekta_key_test__";document.cookie=a+"="+a;var b=document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+a.replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");return b===a}catch(c){return!1}}window.console=window.console||function(){var a={},b=function(a){};return a.log=b,a.warn=b,a.debug=b,a.info=b,a.error=b,a.time=b,a.dir=b,a.profile=b,a.clear=b,a.exception=b,a.trace=b,a.assert=b,a}(),String.prototype.includes||(String.prototype.includes=function(a,b){"use strict";return"number"!=typeof b&&(b=0),b+a.length>this.length?!1:-1!==this.indexOf(a,b)});var c={};window.ConektaStorage||(window.ConektaStorage={setItem:function(d,e,f){return a()?void localStorage.setItem(d,e):b()?void(document.cookie=d+"="+encodeURIComponent(f?JSON.stringify(e):e)):void(c[d]=e)},getItem:function(d,e){if(a())return localStorage.getItem(d);if(b()){var f=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+d.replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"));return e?JSON.parse(f):f||null}return c[d]||null}})}.call(void 0);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};(function(){var a;a=function(a){a&&(bugsnagConektaClient&&bugsnagConektaClient.notify?bugsnagConektaClient.notify(a):console.error(a))};try{try{window.bugsnagConektaClient=bugsnag({apiKey:"38b966c554a73f5a91922d6e70b6ed9f",appVersion:ConektaVersion.version+" build "+ConektaVersion.build,autoNotify:!1})}catch(b){}for(var c=document.getElementsByTagName("script"),d=!1,e=0;e<c.length;e++){var f=c[e];f.src.includes("conekta")&&(f.src.includes("cdn.conekta.io")&&(d=!0),f.src.includes("s3.amazonaws.com/conektaapi")&&(d=!0),f.src.includes("conektaapi.s3.amazonaws.com")&&(d=!0))}d||console.warn("For future updates and bugfixes you must use our CDN (https://cdn.conekta.io/js/latest/conekta.js) instead of local scripts.");
var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;if(k="https://api.conekta.io/",C="",i="es",r="205000",j={},window.conektaAjax||("undefined"!=typeof jQuery?window.conektaAjax=jQuery.ajax:console.error("no either a jQuery or ajax function provided")),s=function(b,c){try{return ConektaStorage.getItem(b,c)}catch(d){return a(d),null}},t=function(b,c,d){try{ConektaStorage.setItem(b,c,d)}catch(e){a(e)}},x=s("_conekta_publishable_key"),l=function(){var a,b,c;if("undefined"==typeof document||"undefined"==typeof document.body||!document.body||"interactive"!==document.readyState&&"complete"!==document.readyState||"undefined"==typeof Conekta)setTimeout(l,150);else if("1"!==s("_conekta_finger_printed")){a=document.getElementsByTagName("body")[0],b=document.createElement("iframe"),b.setAttribute("height","1"),b.setAttribute("scrolling","no"),b.setAttribute("frameborder","0"),b.setAttribute("width","1"),b.setAttribute("src","https://ssl.kaptcha.com/logo.htm?m="+r+"&s="+C),c=document.createElement("img"),c.setAttribute("height","1"),c.setAttribute("width","1"),c.setAttribute("src","https://ssl.kaptcha.com/logo.gif?m="+r+"&s="+C);try{b.appendChild(c)}catch(d){}a.appendChild(b),t("_conekta_finger_printed","1")}},B=function(){var a;"undefined"==typeof document||"undefined"==typeof document.body||!document.body||"interactive"!==document.readyState&&"complete"!==document.readyState||"undefined"==typeof Conekta?setTimeout(B,150):Conekta._helpers.beacon_sent||j.siftscience&&(window._sift=window._sift||[],_sift.push(["_setAccount",j.siftscience.beacon_key]),_sift.push(["_setSessionId",C]),_sift.push(["_trackPageview"]),j.sift_science&&(_sift.push(["_setAccount",j.sift_science.beacon_key]),_sift.push(["_trackPageview"])),(a=function(){var a,b;a=document.createElement("script"),a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.siftscience.com/s.js",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})())},s("_conekta_session_id")&&s("_conekta_session_id_timestamp")&&(new Date).getTime()-6e5<parseInt(s("_conekta_session_id_timestamp")))C=s("_conekta_session_id"),l();else if("undefined"!=typeof Shopify)try{"undefined"==typeof Shopify.getCart&&"undefined"!=typeof jQuery&&(Shopify.getCart=function(a){return"undefined"!=typeof jQuery?jQuery.getJSON("/cart.js",function(b){return"function"==typeof a?a(b):void 0}):(console.error("no either a jQuery or ajax function provided"),null)}),n=function(a){C=a.token,null!==C&&""!==C&&(l(),B(),t("_conekta_session_id",C),t("_conekta_session_id_timestamp",(new Date).getTime().toString()))},"undefined"!=typeof Shopify.getCart&&Shopify.getCart(function(a){n(a)}),u=Shopify.getCart,Shopify.getCart=function(a){var b;b=function(b){n(b),a(b)},u(b)},w=Shopify.onItemAdded,Shopify.onItemAdded=function(a){var b;b=function(b){Shopify.getCart(function(a){n(a)}),a(b)},w(b)},v=Shopify.onCartUpdated,Shopify.onCartUpdated=function(a){var b;b=function(b){n(b),a(b)},v(b)},"undefined"!=typeof jQuery&&jQuery(document).ajaxSuccess(function(a,b,c,d){"cart/add.js"===c.url&&Shopify.getCart(function(a){n(a)})})}catch(b){}else{if(D="abcdefghijklmnopqrstuvwxyz0123456789","undefined"!=typeof crypto&&"undefined"!=typeof crypto.getRandomValues)for(z=new Uint32Array(32),crypto.getRandomValues(z),o=p=0,A=z.length-1;A>=0?A>=p:p>=A;o=A>=0?++p:--p)C+=D.charAt(z[o]%36);else for(o=q=0;30>=q;o=++q)y=Math.floor(36*Math.random()),C+=D.charAt(y);t("_conekta_session_id",C),t("_conekta_session_id_timestamp",(new Date).getTime().toString()),l()}m=function(){try{var b,c,d,e;return d=s("conekta_antifraud_config"),d&&d.match(/^\{/)?j=JSON.parse(d):(c=function(a){return j=a,t("conekta_antifraud_config",j,!0),B()},b=function(b){b&&b.status&&a("Error response status: "+b.status)},e="https://d3fxnri0mz3rya.cloudfront.net/antifraud/"+x+".js",conektaAjax({url:e,dataType:"jsonp",jsonpCallback:"conekta_antifraud_config_jsonp",success:c,error:b}))}catch(f){a(f)}},h={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g,i,j;for(j="",b=void 0,c=void 0,d=void 0,e=void 0,f=void 0,g=void 0,i=void 0,o=0,a=h._utf8_encode(a);o<a.length;)b=a.charCodeAt(o++),c=a.charCodeAt(o++),d=a.charCodeAt(o++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,i=63&d,isNaN(c)?g=i=64:isNaN(d)&&(i=64),j=j+h._keyStr.charAt(e)+h._keyStr.charAt(f)+h._keyStr.charAt(g)+h._keyStr.charAt(i);return j},decode:function(a){var b,c,d,e,f,g,i,j;for(j="",b=void 0,c=void 0,d=void 0,e=void 0,f=void 0,g=void 0,i=void 0,o=0,a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");o<a.length;)e=h._keyStr.indexOf(a.charAt(o++)),f=h._keyStr.indexOf(a.charAt(o++)),g=h._keyStr.indexOf(a.charAt(o++)),i=h._keyStr.indexOf(a.charAt(o++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|i,j+=String.fromCharCode(b),64!==g&&(j+=String.fromCharCode(c)),64!==i&&(j+=String.fromCharCode(d));return j=h._utf8_decode(j)},_utf8_encode:function(a){var b,c,d;for(a=a.replace(/\r\n/g,"\n"),d="",c=0;c<a.length;)b=a.charCodeAt(c),128>b?d+=String.fromCharCode(b):b>127&&2048>b?(d+=String.fromCharCode(b>>6|192),d+=String.fromCharCode(63&b|128)):(d+=String.fromCharCode(b>>12|224),d+=String.fromCharCode(b>>6&63|128),d+=String.fromCharCode(63&b|128)),c++;return d},_utf8_decode:function(a){var b,c,d,e,f;for(f="",o=0,b=c=d=0;o<a.length;)b=a.charCodeAt(o),128>b?(f+=String.fromCharCode(b),o++):b>191&&224>b?(d=a.charCodeAt(o+1),f+=String.fromCharCode((31&b)<<6|63&d),o+=2):(d=a.charCodeAt(o+1),e=a.charCodeAt(o+2),f+=String.fromCharCode((15&b)<<12|(63&d)<<6|63&e),o+=3);return f}},window.Conekta||(window.Conekta={b64:h,setLanguage:function(a){return i=a},getLanguage:function(){return i},setPublicKey:function(a){"string"==typeof a&&a.match(/^[a-zA-Z0-9_]*$/)&&a.length>=20&&a.length<30?(x=a,t("_conekta_publishable_key",x),m()):Conekta._helpers.log("Unusable public key: "+a)},setPublishableKey:function(a){return console.warn("setPublishableKey is going to be deprecated on version 2.0.0"),this.setPublicKey(a)},getPublicKey:function(){return x},getPublishableKey:function(){return console.warn("setPublishableKey is going to be deprecated on version 2.0.0"),this.getPublicKey()},_helpers:{beacon_sent:!1,objectKeys:function(a){var b,c;b=[];for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},parseForm:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,p,q,r,s,t,u,v,w,x,y;if(h={},"object"===("undefined"==typeof a?"undefined":_typeof(a))){if("undefined"!=typeof jQuery&&(a instanceof jQuery||"jquery"in Object(a))&&(a=a.get()[0],"object"!==("undefined"==typeof a?"undefined":_typeof(a))))return{};if(a.nodeType){for(x=a.getElementsByTagName("textarea"),g=a.getElementsByTagName("input"),w=a.getElementsByTagName("select"),b=new Array(x.length+g.length+w.length),o=i=0,t=x.length-1;t>=i;o=i+=1)b[o]=x[o];for(o=m=0,u=g.length-1;u>=m;o=m+=1)b[o+x.length]=g[o];for(o=p=0,v=w.length-1;v>=p;o=p+=1)b[o+x.length+g.length]=w[o];for(r=0,k=b.length;k>r;r++)if(f=b[r],f&&(d=f.getAttribute("data-conekta"))){for(y="SELECT"===f.tagName?f.value:f.getAttribute("value")||f.innerHTML||f.value,e=d.replace(/\]/g,"").replace(/\-/g,"_").split(/\[/),q=null,n=h,j=null,s=0,l=e.length;l>s;s++)c=e[s],n[c]||(n[c]={}),q=n,j=c,n=n[c];q[j]=y}}else h=a;if(h.details&&h.details.line_items&&"[object Array]"!==Object.prototype.toString.call(h.details.line_items)&&"object"===_typeof(h.details.line_items)){var z=[];for(var A in h.details.line_items)z.push(h.details.line_items[A]);h.details.line_items=z}}return h},getSessionId:function(){return C},xDomainPost:function(b,c){var d,e,f;if(f=function(c,d,e){return c&&"error"!==c.object&&c.id?b.success(c):(c.message_to_purchaser||a(JSON.stringify(c)),b.error(c||{object:"error",type:"api_error",message:"Something went wrong on Conekta's end",message_to_purchaser:"Your code could not be processed, please try again later"}))},d=function(c){return c&&c.status&&a("Error response status: "+c.status),b.error({object:"error",type:"api_error",message:"Something went wrong, possibly a connectivity issue",message_to_purchaser:"Your code could not be processed, please try again later"})},"file:"===document.location.protocol&&-1!==navigator.userAgent.indexOf("MSIE"))return b.url=(b.jsonp_url||b.url)+"/"+b.action+".js",b.data._Version=ConektaVersion.api,b.data._RaiseHtmlError=!1,b.data.auth_token=Conekta.getPublicKey(),b.data.conekta_client_user_agent='{"agent":"Conekta JavascriptBindings-JSONP/'+ConektaVersion.version+" build "+ConektaVersion.build+'"}',c&&(b.data.x_tokenization_source=c),conektaAjax({url:k+b.url,dataType:"jsonp",data:b.data,success:f,error:d});if("undefined"!=typeof(new XMLHttpRequest).withCredentials){var g={RaiseHtmlError:!1,Accept:"application/vnd.conekta-v"+ConektaVersion.api+"+json","Accept-Language":Conekta.getLanguage(),"Conekta-Client-User-Agent":'{"agent":"Conekta JavascriptBindings-AJAX/'+ConektaVersion.version+" build "+ConektaVersion.build+'"}',Authorization:"Basic "+h.encode(Conekta.getPublicKey()+":")};return c&&(g["X-Tokenization-Source"]=c),conektaAjax({url:k+b.url,type:"update"===b.action?"PUT":"POST",dataType:"json",data:JSON.stringify(b.data),contentType:"application/json",headers:g,success:f,error:d})}e=new easyXDM.Rpc({swf:"https://conektaapi.s3.amazonaws.com/v0.3.2/flash/easyxdm.swf",remote:k+"easyxdm_cors_proxy.html"},{remote:{request:{}}});var i={RaiseHtmlError:!1,Accept:"application/vnd.conekta-v"+ConektaVersion.api+"+json","Accept-Language":Conekta.getLanguage(),"Conekta-Client-User-Agent":'{"agent":"Conekta JavascriptBindings-XDM/'+ConektaVersion.version+" build "+ConektaVersion.build+'"}',Authorization:"Basic "+h.encode(Conekta.getPublicKey()+":")};return c&&(i["X-Tokenization-Source"]=c),e.request({url:k+b.url,method:"update"===b.action?"PUT":"POST",headers:i,data:JSON.stringify(b.data)},f,function(c){return a("easyXDM error -> "+c),b.error({object:"error",type:"api_error",message:"Something went wrong, possibly a connectivity issue",message_to_purchaser:"Your code could not be processed, please try again later"})})},log:function(a){return"undefined"!=typeof console&&console.log?console.log(a):void 0},querySelectorAll:function(a){var b,c,d;if(document.querySelectorAll)return document.querySelectorAll(a);for(d=document.createElement("style"),c=[],document.documentElement.firstChild.appendChild(d),document._qsa=[],d.styleSheet?d.styleSheet.cssText=a+"{x-qsa:expression(document._qsa && document._qsa.push(this))}":d.style.cssText=a+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),d.parentNode.removeChild(d);document._qsa.length;)b=document._qsa.shift(),b.style.removeAttribute("x-qsa"),c.push(b);return document._qsa=null,c},querySelector:function(a){var b;return document.querySelector?document.querySelector(a):(b=this.querySelectorAll(a),b.length>0?b[0]:null)}}},Conekta._helpers.querySelectorAll("script[data-conekta-session-id]").length>0&&(g=Conekta._helpers.querySelectorAll("script[data-conekta-session-id]")[0],C=g.getAttribute("data-conekta-session-id")),Conekta._helpers.querySelectorAll("script[data-conekta-public-key]").length>0&&(g=Conekta._helpers.querySelectorAll("script[data-conekta-public-key]")[0],window.Conekta.setPublicKey(g.getAttribute("data-conekta-public-key"))))}catch(b){a(b)}}).call(void 0),function(){var a,b,c,d,e,f,g,h,i,j=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^4(026|17500|405|508|844|91[37])/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^(5[1-5]|677189)|^(222[1-9]|2[3-6]\d{2}|27[0-1]\d|2720)/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|6761|6763)/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]},{name:"pagaflex",pattern:/^(636937[0-1][0-9])/,valid_length:[16]},{name:"carnet",pattern:/^(639559|506221|50643[6-7])/,valid_length:[16]},{name:"sivale",pattern:/^(627636)/,valid_length:[16]}],e=function(a){var b,c,d,e,f,g;for(g=0,f=a.split("").reverse(),e=c=0,d=f.length;d>c;e=++c)b=f[e],b=+b,e%2?(b*=2,g+=10>b?b:b-9):g+=b;return g%10===0},d=function(a,b){var c;return c=a.length,j.call(b.valid_length,c)>=0},a=["visa","mastercard","maestro","visa_electron","amex","laser","diners_club_carte_blanche","diners_club_international","discover","jcb","carnet","pagaflex","sivale"],c=function(c){var d,e,f,g,h;for(h=function(){var c,e,f,g;for(g=[],c=0,e=b.length;e>c;c++)d=b[c],f=d.name,j.call(a,f)>=0&&g.push(d);return g}(),f=0,g=h.length;g>f;f++)if(e=h[f],c.match(e.pattern))return e;return null},f=function(a){return"string"==typeof a&&a.match(/^[\d]{1,2}$/)?parseInt(a):a},g=function(a){return"number"==typeof a&&100>a&&(a+=2e3),"string"==typeof a&&a.match(/^([\d]{2,2}|20[\d]{2,2})$/)?(a.match(/^([\d]{2,2})$/)&&(a="20"+a),parseInt(a)):a},h=function(){return(new Date).getFullYear()-1},i=function(){return(new Date).getFullYear()+22},Conekta.card={},Conekta.card.getBrand=function(a){var b;return"string"==typeof a?a=a.replace(/[ -]/g,""):"number"==typeof a&&(a=toString(a)),b=c(a),b&&b.name?b.name:null},Conekta.card.validateCVC=function(a){return"number"==typeof a&&a>=0&&1e4>a||"string"==typeof a&&null!==a.match(/^[\d]{3,4}$/)},Conekta.card.validateExpMonth=function(a){var b;return b=f(a),"number"==typeof b&&b>0&&13>b},Conekta.card.validateExpYear=function(a){var b;return b=g(a),"number"==typeof b&&b>h()&&b<i()},Conekta.card.validateExpirationDate=function(a,b){var c,d;return c=f(a),d=g(b),"number"==typeof c&&c>0&&13>c&&"number"==typeof d&&d>h()&&d<i()?new Date(d,c,new Date(d,c,0).getDate())>new Date:!1},Conekta.card.validateExpiry=function(a,b){return Conekta.card.validateExpirationDate(a,b)},Conekta.card.validateName=function(a){return"string"==typeof a&&null!==a.match(/^\s*[A-z]+\s+[A-z]+[\sA-z]*$/)&&null===a.match(/visa|master\s*card|amex|american\s*express|banorte|banamex|bancomer|hsbc|scotiabank|jcb|diners\s*club|discover/i)},Conekta.card.validateNumber=function(a){var b,f,g;return a="string"==typeof a?a.replace(/[ -]/g,""):"number"==typeof a?a.toString():"",b=c(a),g=!1,f=!1,null!=b&&(g=e(a),f=d(a,b)),g&&f},Conekta.Card=Conekta.card}.call(void 0);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};(function(){Conekta.Token={};var a=function(a,b,c,d){var e,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"conekta.js";if("function"!=typeof c&&(c=Conekta._helpers.log),"function"!=typeof d&&(d=Conekta._helpers.log),e=Conekta._helpers.parseForm(b),"object"===("undefined"==typeof e?"undefined":_typeof(e))){if(Conekta._helpers.objectKeys(e).length>0){e.card?e.card.device_fingerprint=Conekta._helpers.getSessionId():d({object:"error",type:"invalid_request_error",message:"The form or hash has no attributes 'card'.  If you are using a form, please ensure that you have have an input or text area with the data-conekta attribute 'card[number]'.  For an example form see: https://github.com/conekta/conekta.js/blob/master/examples/credit_card.html",message_to_purchaser:"The card could not be processed, please try again later"}),e.card&&e.card.address&&!(e.card.address.street1||e.card.address.street2||e.card.address.street3||e.card.address.city||e.card.address.state||e.card.address.country||e.card.address.zip)&&delete e.card.address;var g="tokens";if("update"===a){if(!e.token_id)return d({object:"error",type:"invalid_request_error",message:"The token_id parameter is required for update token.",message_to_purchaser:"The card could not be processed, please try again later"});g="tokens/"+e.token_id}return Conekta._helpers.xDomainPost({jsonp_url:g,url:g,action:a,data:e,success:c,error:d},f)}return d({object:"error",type:"invalid_request_error",message:"supplied parameter 'token' is usable object but has no values (e.g. amount, description) associated with it",message_to_purchaser:"The card could not be processed, please try again later"})}return d({object:"error",type:"invalid_request_error",message:"Supplied parameter 'token' is not a javascript object or a form",message_to_purchaser:"The card could not be processed, please try again later"})};Conekta.Token.update=function(b,c,d,e){return a("update",b,c,d,e)},Conekta.Token.create=function(b,c,d,e){return a("create",b,c,d,e)},Conekta.token={},Conekta.token.create=Conekta.Token.create,Conekta.token.update=Conekta.Token.update}).call(void 0);