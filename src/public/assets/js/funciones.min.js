function cerrarTodo(){document.getElementsByTagName("body")[0].removeAttribute("style"),ocultar_menu(),buscador_caja&&ocultar_buscador()}function ocultar_buscador(){buscador_caja.style.height=0,form_bucador.reset(),fondo_oscuro.classList.remove("fondo-oscuro__activo"),buscador_interno.classList.add("d-none")}function ocultar_menu(){menu_links.parentElement.classList.contains("menu__links-show")&&(menu_links.parentElement.classList.remove("menu__links-show"),menu_accion.querySelector(".hamburger").classList.remove("is-active"),fondo_oscuro.classList.remove("fondo-oscuro__activo"))}function expresiones_regulares(){const e={nombre:/^[a-zA-Z\u00C0-\u017F\s]+$/,usuario:/^[0-9a-zA-Z\d$@$!%*?.&_-]+$/,numerico:/^[0-9]+$/,telefono:/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im,correo:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,fecha:/^d{1,2}\/\d{1,2}\/\d{2,4}$/,password:/^[a-zA-Z0-9\d$@$!%*?.&_-]{8,9}$/,password2:/^[a-zA-Z0-9\d$@$!%ñ*?.&_-]+$/};return e}function comprobar_campos_vacios(e){const a=document.querySelectorAll(`#${e} input`);a&&a.forEach(e=>{""==e.value&&e.classList.add("form__input-error")});const t=document.querySelectorAll('input[type="radio"]');if(t){let e=Object.values(t),a=[];e.filter((e,t)=>a[t]=e.getAttribute("name")),a.filter((e,t)=>a.indexOf(e)===t),a.forEach(e=>{document.querySelector(`input[name="${e}"]:checked`)?document.querySelector(`input[name="${e}"]`).parentElement.classList.remove("form__input-error"):document.querySelector(`input[name="${e}"]`).parentElement.classList.add("form__input-error")})}}function validarFormularioRegistro(e,a,t,r){let o,n=e.target.name;switch(n){case"Usuario":o="No se permiten caracteres especiales",validarInputValue(expresiones_regulares().usuario,e.target,e.target.name,o,a);break;case"Nombre":case"ApellidoP":case"ApellidoM":o="No se permiten numeros o caracteres especiales",validarInputValue(expresiones_regulares().nombre,e.target,e.target.name,o,a);break;case"Genero":document.querySelector('input[name="Genero"]:checked')?(validaOk(document.querySelector('input[name="Genero"]')),a.Genero=!0):validaFalla(document.querySelector('input[name="Genero"]').parentElement);break;case"Telefono":o="Numero de teléfono inválido",validarInputValue(expresiones_regulares().telefono,e.target,e.target.name,o,a);break;case"Correo":o="Correo electronico inválido",validarInputValue(expresiones_regulares().correo,e.target,e.target.name,o,a);break;case"FechaN":o="Fecha de nacimiento inválida",validarInputValue(expresiones_regulares().fecha,e.target,e.target.name,o,a),validar_fecha(e.target,a),validaYear4Digitos(e,r);break;case"Contrasena":o="La contraseña debe tener entre 8 y 9 caracteres de longitud",validarInputValue(expresiones_regulares().password,e.target,e.target.name,o,a);break;case"Contrasena2":o="Las contraseñas no coinciden",validar_repetir_contrasena(o,a)}comprobar_campos_validos(a,t)}function validarFormularioIngreso(e,a,t,r){let o,n=e.target.name;switch(n){case"Usuario":let t=isNaN(document.querySelector("#"+n).value.trim());t?(o="El Correo electronico no es válido",validarInputValue(expresiones_regulares().correo,e.target,e.target.name,o,a)):(o="El usuario del ticket debe ser númerico",validarInputValue(expresiones_regulares().numerico,e.target,e.target.name,o,a));break;case"Password":let l=isNaN(document.querySelector("#Usuario").value);l?(o="No se permiten caracteres especiales",validarInputValue(expresiones_regulares().password2,e.target,e.target.name,o,a)):(o="La contraseña del ticket debe ser númerica",validarInputValue(expresiones_regulares().numerico,e.target,e.target.name,o,a));break;case"FechaN":o="Fecha de nacimiento inválida",validarInputValue(expresiones_regulares().fecha,e.target,e.target.name,o,a),validar_fecha(e.target,a),validaYear4Digitos(e,r)}comprobar_campos_validos(a,t)}function comprobar_campos_validos(e,a){const t=Object.keys(e).length;let r=0;for(const a in e)e[a]&&r++;r===t?(a.classList.remove("btn__disabled"),document.querySelector(".form__mensaje")&&(document.querySelector(".form__mensaje").innerHTML="")):(a.classList.add("btn__disabled"),r=0)}function validarInputValue(e,a,t,r,o){let n=a.parentElement.parentElement;a.value.length>0?e.test(a.value.trim())?(validaOk(a),o[t]=!0):(validaFalla(a,r),o[t]=!1):(a.classList.remove("form__input-error"),n.querySelector(".form__error").classList.remove("form__error-visible"),n.querySelector(".form__error").textContent="",o[t]=!1)}function validar_repetir_contrasena(e,a){const t=document.getElementById("Contrasena"),r=document.getElementById("Contrasena2");""!==r.value?r.value!==t.value?(validaFalla(r,e),a.Contrasena2=!1):(validaOk(r),a.Contrasena2=!0):validaFalla(r,e)}function formulario_invalido(e,a,t){e.classList.add("btn__disabled");let r="Por favor rellena todos los campos marcados";printAlert(a,"danger",r),comprobar_campos_vacios(t)}function validaOk(e){e.classList.contains("form__input-error")&&e.classList.remove("form__input-error"),e.parentElement.classList.contains("form__input-error")&&e.parentElement.classList.remove("form__input-error");let a=e.parentElement.parentElement,t=a.querySelector(".form__error");t?t.classList.remove("form__error-visible"):e.classList.remove("form__error-visible")}function validaFalla(e,a){e.classList.add("form__input-error");const t=e.parentElement.parentElement,r=t.querySelector(".form__error");r.classList.add("form__error-visible"),null!==a&&(r.textContent=a)}function printAlert(e,a,t){e.innerHTML=`\n        <div class="alert alert_${a}">\n            <div class="alert--icon">\n                <i class="icon-${a}"></i>\n            </div>\n            <div class="alert--content">\n                ${t}\n            </div>\n            <div class="alert--close">\n                <i class="icon-close-outline"></i>\n            </div>\n        </div>\n    `,alertas()}function ejecutar_mensaje_error(e){Swal.fire({title:"Error "+e.status,text:"¡Ocurrió un error al intentar iniciar sesión!. intenta de nuevo o más tarde.",icon:"error",confirmButtonText:"Cerrar",showCloseButton:!0,footer:'<a href="javascript:void(0)">¡Reportar la falla!</a>'})}function validar_fecha(e,a){const t=cambiarFormatoFecha(e.value.trim());if(validarFormatoFecha(t))if(existeFecha(t))if(validarFechaMenorActual(t))if(validaRangoFecha(t))validaOk(e),a[e.name]=!0;else{const t=new Date,r=t.getFullYear();validaFalla(e,`* Tu fecha de nacimiento de estar dentro de 1900 - ${r}`),a[e.name]=!1}else validaFalla(e,"* Tu fecha de nacimiento debe ser menor a la actual"),a[e.name]=!1;else validaFalla(e,"* Formato de fecha inválido"),a[e.name]=!1;else validaFalla(e,"* Formato de fecha inválido"),a[e.name]=!1}function validarFormatoFecha(e){var a=/^\d{1,2}\/\d{1,2}\/\d{2,4}$/;return!(!e.match(a)||""==e)}function existeFecha(e){var a=e.split("/"),t=a[0],r=a[1],o=a[2],n=new Date(o,r,"0");return!(t-0>n.getDate()-0||r>12)}function validarFechaMenorActual(e){var a=new Date,t=e.split("/");a.setFullYear(t[2],t[1]-1,t[0]);var r=new Date;return!(a>=r)}function cambiarFormatoFecha(e){let a=e.split("-"),t=a[0],r=a[1],o=a[2];return`${o}/${r}/${t}`}function validaYear4Digitos(e,a){let t=e.target.value;if(e.target.value.length>10){let e=t.split("-"),r=e[0],o=e[1],n=e[2],l=r.slice(0,-1);a.value=l+"-"+o+"-"+n}}function validaRangoFecha(e){let a=e.split("/"),t=a[2],r="1900";return!(Date.parse(t)<Date.parse(r))}function mostrar_ocultar_password(){if(document.querySelector(".form__btn-eye")){const e=document.querySelectorAll(".form__btn-eye");e.forEach(e=>{e.addEventListener("click",function(a){e.classList.toggle("cambiar");e.parentElement.querySelector(".form__input");e.classList.contains("cambiar")?e.parentElement.querySelector(".form__input").setAttribute("type","text"):e.parentElement.querySelector(".form__input").setAttribute("type","password")})})}}function desbloquear_btn_form(e){document.querySelector(".loader__btn")&&(document.querySelector(".loader__btn").classList.remove("loader__show"),document.getElementById(e).disabled=!1)}function bloquear_btn_form(e){document.querySelector(".loader__btn")&&(document.querySelector(".loader__btn").classList.add("loader__show"),document.getElementById(e).disabled=!0)}function eliminarAcentos(){var e="ÃÀÁÄÂÈÉËÊÌÍÏÎÒÓÖÔÙÚÜÛãàáäâèéëêìíïîòóöôùúüûÑñÇç",a="AAAAAEEEEIIIIOOOOUUUUaaaaaeeeeiiiioooouuuunncc";mapping={};for(var t=0,r=e.length;t<r;t++)mapping[e.charAt(t)]=a.charAt(t);return function(e){for(var a=[],t=0,r=e.length;t<r;t++){var o=e.charAt(t);mapping.hasOwnProperty(e.charAt(t))?a.push(mapping[o]):a.push(o)}return a.join("")}}async function bitacora_errores(e,a,t=null){const r={Api:e.url,Mensaje:a.Message,Estatus:e.status,EstatusMsj:e.statusText};a.MessageDetail&&(r.Detalle=a.MessageDetail),t&&(r.Data=JSON.stringify(t));let o={method:"POST",headers:{"Content-Type":"application/json charset=utf-8"},body:JSON.stringify(r)};try{await fetch(app.urlBitacora,o)}catch(e){console.log(e)}}function fadeIn(e){var a,t,r=e;clearInterval(a),clearInterval(t),r.fadeIn=function(e){var t=0;r.style.display="flex",r.style.opacity=0,a=setInterval(function(){t<1?t+=.1:1===t&&clearInterval(a),r.style.opacity=t},e)},r.fadeIn(10)}function fadeOut(e){var a,t,r=e;clearInterval(a),clearInterval(t),r.fadeOut=function(e){var a=1;r.style.opacity=1,t=setInterval(function(){a>0?a-=.01:a<0&&(r.style.opacity=0,r.style.display="none",clearInterval(t)),r.style.opacity=a},e)},r.fadeOut(10)}let app={urlConsulta:"https://api.emarketingsd.org/ConsultaResultadosUniversal/",urlbase:"http://salud-digna.test/",urlBitacora:"https://api-errores-resultados.salud-digna.site/beta/guardar/bitacoraWeb"};document.getElementById("fondo-oscuro").addEventListener("click",function(){cerrarTodo()});const menu_links=document.querySelector(".menu__links"),menu_item_show=document.querySelectorAll(".menu__item-show"),menu_accion=document.querySelector(".menu__accion"),hamburger=document.querySelector(".hamburger"),fondo_oscuro=document.getElementById("fondo-oscuro"),buscador_caja=document.querySelector(".buscador__caja"),form_bucador=document.getElementById("form-buscador"),input_search=document.querySelector(".buscador__input"),buscador_interno=document.querySelector(".buscador__interno"),btn_buscar=document.getElementById("btn-buscar"),buscador_input=document.querySelector(".buscador__input");if(document.querySelector(".link-localizalo")){let e=document.querySelector(".link-localizalo");e.addEventListener("click",function(e){e.preventDefault(),Swal.fire({imageUrl:app.urlbase+"assets/images/ticket.png",imageAlt:"A tall image",confirmButtonText:"Cerrar",showCloseButton:!0,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})})}